{
  "module_name": "skill-knowledge",
  "target_project": "/Users/wenliang_zeng/workspace/open_sources/ccg-workflows/git-repos/everything-claude-code",
  "scope": "skills/, commands/, rules/, contexts/ - Workflow definitions, best practices, slash commands, guidelines",
  "existing_structures": [
    "skills/ - 12+ skill directories with SKILL.md files",
    "skills/continuous-learning/ - Stop hook-based pattern extraction from sessions",
    "skills/continuous-learning-v2/ - Instinct-based learning with confidence scoring (0.3-0.9)",
    "skills/tdd-workflow/ - RED-GREEN-REFACTOR TDD methodology with 80% coverage requirement",
    "skills/security-review/ - 10-point security checklist with code pattern examples",
    "skills/eval-harness/ - Formal EDD evaluation framework with pass@k metrics",
    "skills/verification-loop/ - Multi-phase verification (build, types, lint, tests, security, diff)",
    "skills/iterative-retrieval/ - Progressive context refinement pattern for subagent context problem",
    "skills/coding-standards/ - Language best practices",
    "skills/backend-patterns/ - API, database, caching patterns",
    "skills/frontend-patterns/ - React, Next.js patterns",
    "skills/strategic-compact/ - Manual compaction suggestions",
    "skills/golang-patterns/ - Go idioms and best practices",
    "skills/golang-testing/ - Go testing patterns, TDD, benchmarks",
    "commands/ - 18+ slash command definitions as .md files",
    "commands/tdd.md - /tdd command invoking tdd-guide agent",
    "commands/plan.md - /plan command for implementation planning",
    "commands/verify.md - /verify command for comprehensive verification",
    "commands/checkpoint.md - /checkpoint command for workflow state management",
    "commands/learn.md - /learn command for mid-session pattern extraction",
    "commands/skill-create.md - /skill-create for generating skills from git history",
    "commands/instinct-*.md - Instinct management commands (status, import, export)",
    "commands/evolve.md - /evolve for clustering instincts into skills",
    "rules/ - 6 categorized rule files",
    "rules/security.md - Mandatory security checks before commit",
    "rules/testing.md - TDD workflow and 80% coverage requirement",
    "rules/coding-style.md - Immutability, file organization, error handling",
    "rules/git-workflow.md - Commit format, PR process, feature workflow",
    "rules/agents.md - Agent orchestration and delegation guidelines",
    "rules/performance.md - Model selection strategy and context management",
    "contexts/ - 3 mode-specific context files",
    "contexts/dev.md - Development mode: code first, working solutions",
    "contexts/review.md - Code review mode: quality, security, maintainability",
    "contexts/research.md - Research mode: understanding before acting",
    "hooks/hooks.json - Comprehensive hooks configuration",
    ".claude-plugin/plugin.json - Plugin manifest with skills[] and agents[] paths"
  ],
  "existing_conventions": [
    "SKILL.md naming: kebab-case directory names with SKILL.md as entry point",
    "YAML frontmatter format with --- delimiters containing name, description, optional tools/version",
    "Skill description contains trigger conditions using natural language",
    "Skills organized by domain/category in subdirectories",
    "Commands are .md files with simple frontmatter (description, argument-hint optional)",
    "Commands reference agents via Task tool delegation pattern",
    "Commands use $ARGUMENTS for parameter passing",
    "Rules are concise (< 100 lines) with actionable checklists",
    "Rules use DO/DON'T format with code examples",
    "Contexts are lightweight mode switches (< 30 lines each)",
    "Contexts define: Mode, Focus, Behavior, Priorities, Tools to favor",
    "Hooks use ${CLAUDE_PLUGIN_ROOT} for path resolution in plugin context",
    "Plugin.json declares skills[] and agents[] as path arrays",
    "Skills should have When to Use and When NOT to Use sections"
  ],
  "constraints_discovered": [
    "Hooks fire 100% deterministically vs skills 50-80% based on Claude judgment",
    "Plugin cannot distribute rules via plugin system (upstream Claude Code limitation)",
    "Rules must be manually copied to ~/.claude/rules/ or .claude/rules/",
    "DO NOT add hooks field to plugin.json - Claude Code v2.1+ auto-loads hooks/hooks.json",
    "80% test coverage requirement is mandatory for TDD workflow",
    "No hardcoded secrets allowed - environment variables only",
    "Console.log statements must be removed before commit (enforced by hooks)",
    "Max 3 cycles for iterative retrieval pattern before proceeding",
    "Context window management: avoid last 20% for complex refactoring tasks",
    "Instinct confidence range: 0.3 (tentative) to 0.9 (near-certain)",
    "Auto-approve threshold for instincts: 0.7 confidence",
    "Confidence decay rate: 0.05 per interval without observation",
    "Max file size for observations: 10MB with archive after 7 days",
    "Async hooks with timeout: 30 seconds default for background operations",
    "pass@3 > 90% target for capability evals",
    "pass^3 = 100% requirement for regression evals",
    "File size limits: 200-400 lines typical, 800 max",
    "Function size limit: < 50 lines",
    "Nesting depth limit: 4 levels maximum"
  ],
  "open_questions": [
    "How do inherited instincts interact with personal instincts (priority, conflict resolution)?",
    "What is the optimal cluster_threshold for evolving instincts into skills (default: 3)?",
    "How should checkpoint versioning work across git branches?",
    "What triggers background observer agent timing vs on-demand analysis?",
    "How to handle rule conflicts from different sources (plugin vs project vs user)?",
    "What is the token budget allocation strategy for skill loading at scale?",
    "How does strategic-compact determine when to suggest compaction?",
    "What is the migration path from v1 skills to v2 instincts?",
    "How to share instincts across team members while preserving privacy?",
    "What observability is needed to debug instinct learning effectiveness?"
  ],
  "dependencies": [
    "Node.js - Required for cross-platform hook scripts",
    "Package manager detection: npm, pnpm, yarn, or bun (priority order)",
    "Optional: Prettier - Auto-formatting on PostToolUse hooks",
    "Optional: TypeScript/tsc - Type checking on PostToolUse hooks",
    "Optional: ESLint - Linting on verification loops",
    "Claude Code CLI v2.1.0+ - Required for plugin/hooks support",
    "GitHub App (optional) - Skill Creator for advanced analysis",
    "Haiku model - Background observer for continuous-learning-v2",
    "tmux - Recommended for long-running commands and dev servers",
    "Zod - Schema validation for input validation patterns"
  ],
  "risks": [
    "Hook execution blocks tool use if not marked async",
    "Duplicate hooks detection error in Claude Code v2.1+ if hooks declared in plugin.json",
    "Context window overflow with many MCPs enabled (keep < 10 per project, < 80 tools)",
    "Instinct confidence decay over time without observation can lose valuable patterns",
    "Session evaluation at Stop hook may timeout for very long sessions",
    "Regex matchers in hooks can fail on edge cases (escaping issues)",
    "Cross-platform path handling differences (Windows vs Unix)",
    "Package manager detection may select wrong manager in monorepos",
    "Skill firing is probabilistic - not guaranteed to trigger when expected",
    "Background agent (Haiku) costs accumulate with frequent observation intervals"
  ],
  "success_criteria_hints": [
    "Skills should have clear trigger conditions documented in frontmatter description",
    "Rules should be actionable with checkboxes for pre-commit/pre-PR verification",
    "Hooks should be marked async when blocking is not required",
    "Commands should delegate complex logic to specialized agents via Task",
    "Contexts should be mode-specific behavioral hints, not full system prompts",
    "Eval definitions should be written BEFORE implementation (EDD principle)",
    "80% test coverage is minimum - 100% for financial/security/auth code",
    "Security checks: no hardcoded secrets, parameterized queries, input validation",
    "Verification loop should pass all 6 phases before PR creation",
    "Instincts should reach 0.7+ confidence before auto-approval",
    "Iterative retrieval should find 3+ high-relevance files (>= 0.7) before proceeding"
  ]
}
