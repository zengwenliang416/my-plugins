# Codex CLI - Memory Plugin Prompts Library

## 代码结构分析

### 模块结构提取

```
分析项目的模块结构，提取：
1. 入口文件和主模块
2. 模块间依赖关系图
3. 导出的公共接口
4. 内部私有函数

输出格式: Markdown + Mermaid 依赖图
```

### 函数签名提取

```
扫描以下文件，提取所有函数签名：
- 函数名
- 参数列表及类型
- 返回值类型
- 是否异步
- 导出状态

输出格式: JSON 数组
```

## 流程分析

### 调用链追踪

```
追踪函数 [function_name] 的完整调用链：
1. 直接调用者
2. 间接调用者（向上3层）
3. 被调用函数（向下3层）
4. 异步调用标注

输出格式: Mermaid 序列图
```

### 数据流追踪

```
分析数据从 [source] 到 [target] 的流转：
1. 变量声明点
2. 变量修改点
3. 函数边界穿越
4. 模块边界穿越
5. 最终使用点

输出格式: Mermaid 流程图
```

### 条件分支分析

```
分析函数 [function_name] 的条件分支：
1. 所有 if/else/switch 分支
2. 每个分支的触发条件
3. 分支覆盖的代码范围
4. 边界条件

输出格式: 决策树 Markdown
```

## API 分析

### 端点提取

```
扫描项目，提取所有 HTTP 端点：
- HTTP 方法 (GET/POST/PUT/DELETE)
- 路由路径
- 处理函数
- 请求参数
- 响应类型
- 中间件

框架检测: 自动 (Express/NestJS/FastAPI/Spring/Go)
输出格式: Markdown 表格
```

### 数据模型提取

```
提取项目的数据模型定义：
- 模型名称
- 字段列表及类型
- 关系（1:1, 1:N, N:N）
- 验证规则
- 索引

输出格式: JSON Schema
```

## 安全审计

### 敏感数据流

```
追踪敏感数据的流转路径：
- 用户输入入口
- 数据处理节点
- 存储位置
- 输出出口

关注: 密码、token、个人信息
输出格式: 安全报告 Markdown
```

### 依赖安全

```
分析项目依赖的安全性：
- 直接依赖列表
- 已知漏洞检查
- 版本过时检查
- 许可证合规

输出格式: 安全报告 Markdown
```

## 使用说明

选择合适的 prompt 模板，替换方括号中的占位符：

- `[function_name]` - 目标函数名
- `[source]` / `[target]` - 数据流起止点
- `[file_path]` - 文件路径

所有 prompt 支持以下输出格式：

- `markdown` - 结构化 Markdown
- `json` - 机器可读 JSON
- `mermaid` - Mermaid 图表
