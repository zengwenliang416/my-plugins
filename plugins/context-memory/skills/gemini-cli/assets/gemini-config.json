{
  "cli": {
    "command": "gemini",
    "default_flags": ["-p", "--sandbox"],
    "timeout_ms": 120000,
    "retry": {
      "max_attempts": 3,
      "backoff_multiplier": 2,
      "initial_delay_ms": 1000
    }
  },
  "generation_types": {
    "skill_index": {
      "name": "SKILL.md 索引生成",
      "description": "为技能目录生成渐进式加载索引",
      "levels": {
        "1": "名称 + 一句话描述",
        "2": "+ 触发条件 + 核心产出",
        "3": "+ 参数列表 + 依赖",
        "4": "+ 完整执行流程"
      },
      "output_formats": ["markdown", "json", "yaml"]
    },
    "doc_summary": {
      "name": "文档摘要生成",
      "description": "生成项目文档的结构化摘要",
      "summary_structure": [
        "项目概述 (1-2段)",
        "架构要点 (bullet points)",
        "API 概览",
        "使用示例"
      ],
      "max_tokens": 2000,
      "output_formats": ["markdown", "json"]
    },
    "design_tokens": {
      "name": "设计 Token 分析",
      "description": "分析和提取设计系统 token",
      "token_categories": {
        "colors": ["primary", "secondary", "accent", "semantic", "gradients"],
        "spacing": ["base_unit", "scale_factors"],
        "typography": ["font_families", "size_scale", "weight_mappings"],
        "animation": ["durations", "easings", "transitions"]
      },
      "output_formats": ["yaml", "json"]
    },
    "workflow_summary": {
      "name": "工作流摘要生成",
      "description": "总结工作流会话的关键信息",
      "summary_focus": [
        "关键决策及理由",
        "已完成任务清单",
        "产出文件列表",
        "待处理事项",
        "重要上下文"
      ],
      "output_formats": ["markdown", "json"]
    }
  },
  "prompt_templates": {
    "skill_index": {
      "system": "你是一个技术文档专家。生成技能索引时要支持渐进式加载，从简洁到详细。",
      "task_prefix": "为以下技能目录生成 SKILL.md 索引:\n\n",
      "output_instruction": "\n\n请生成支持 4 级渐进式加载的索引，格式为 {format}。"
    },
    "doc_summary": {
      "system": "你是一个技术写作专家。生成摘要时要保持技术准确性，控制在指定长度内。",
      "task_prefix": "为以下文档生成结构化摘要:\n\n",
      "output_instruction": "\n\n摘要长度限制: 2000 tokens。格式: {format}。"
    },
    "design_tokens": {
      "system": "你是一个设计系统专家。提取设计 token 时要识别所有颜色、间距、字体和动画定义。",
      "task_prefix": "分析以下代码，提取设计系统 token:\n\n",
      "output_instruction": "\n\n请以 YAML 格式输出，包含所有 token 类别。"
    },
    "workflow_summary": {
      "system": "你是一个项目管理专家。总结工作流时要提取关键决策、完成事项和待办事项。",
      "task_prefix": "总结以下工作流会话:\n\n",
      "output_instruction": "\n\n请生成结构化摘要，格式为 {format}。"
    }
  },
  "output_formats": {
    "markdown": {
      "extension": ".md",
      "template": "# {title}\n\n## Overview\n\n{overview}\n\n## Details\n\n{details}\n\n## References\n\n{references}"
    },
    "json": {
      "extension": ".json",
      "schema": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "sections": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "heading": { "type": "string" },
                "content": { "type": "string" }
              }
            }
          },
          "metadata": { "type": "object" }
        }
      }
    },
    "yaml": {
      "extension": ".yaml",
      "structure": {
        "document": {
          "title": "string",
          "sections": "array",
          "metadata": "object"
        }
      }
    }
  },
  "fallback": {
    "enabled": true,
    "strategies": {
      "network_error": {
        "action": "retry",
        "max_retries": 3
      },
      "quota_exceeded": {
        "action": "switch_to_codex",
        "message": "Gemini 配额已耗尽，切换到 Codex"
      },
      "service_error": {
        "action": "notify_user",
        "message": "Gemini 服务暂时不可用"
      }
    },
    "codex_fallback": {
      "enabled": true,
      "simplified_prompt": true,
      "quality_warning": "使用 Codex 降级，输出质量可能下降"
    }
  }
}
