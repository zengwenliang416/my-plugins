---
name: complexity-analyzer
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘thinking å·¥ä½œæµ Phase 2ï¼šè¯„ä¼°é—®é¢˜å¤æ‚åº¦ï¼Œå†³å®šæ€è€ƒæ·±åº¦
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/complexity-analysis.mdï¼ŒåŒ…å«å¤æ‚åº¦è¯„åˆ†å’Œå»ºè®®æ·±åº¦
  ã€ä¸è§¦å‘ã€‘ç”¨æˆ·å·²æ˜ç¡®æŒ‡å®š --depth å‚æ•°
  ã€å…ˆé—®ä»€ä¹ˆã€‘æ— éœ€è¯¢é—®ï¼Œè‡ªåŠ¨åˆ†æ
  ã€ğŸš¨ å¼ºåˆ¶ã€‘å¿…é¡»ä½¿ç”¨ sequential-thinking MCP è¿›è¡Œç»“æ„åŒ–åˆ†æ
allowed-tools:
  - Read
  - Write
  - mcp__sequential-thinking__sequentialthinking
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„ï¼ˆç”± command ä¼ å…¥ï¼‰
---

# Complexity Analyzer - å¤æ‚åº¦è¯„ä¼°åŸå­æŠ€èƒ½

## MCP å·¥å…·é›†æˆ

| MCP å·¥å…·              | ç”¨é€”                         | è§¦å‘æ¡ä»¶        |
| --------------------- | ---------------------------- | --------------- |
| `sequential-thinking` | ç»“æ„åŒ–å¤æ‚åº¦è¯„ä¼°ï¼Œå¤šç»´åº¦åˆ†æ | ğŸš¨ æ¯æ¬¡æ‰§è¡Œå¿…ç”¨ |

## èŒè´£è¾¹ç•Œ

- **è¾“å…¥**: ç”¨æˆ·é—®é¢˜ï¼ˆä» `${run_dir}/input.md` è¯»å–ï¼‰
- **è¾“å‡º**: `${run_dir}/complexity-analysis.md`
- **æ ¸å¿ƒèƒ½åŠ›**: å¤šç»´åº¦å¤æ‚åº¦è¯„ä¼°ã€æ·±åº¦è·¯ç”±å»ºè®®

---

## ğŸš¨ CRITICAL: å¼ºåˆ¶å·¥å…·ä½¿ç”¨è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ å¤æ‚åº¦åˆ†æ                                                   â”‚
â”‚     âœ… å¿…é¡»ä½¿ç”¨: mcp__sequential-thinking__sequentialthinking   â”‚
â”‚     âŒ ç¦æ­¢è¡Œä¸º: ç›´æ¥ç»™å‡ºè¯„åˆ†ã€è·³è¿‡ç»“æ„åŒ–åˆ†æ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ‰§è¡Œæµç¨‹

### Step 0: ç»“æ„åŒ–è¯„ä¼°è§„åˆ’ï¼ˆsequential-thinkingï¼‰

ğŸš¨ **å¿…é¡»é¦–å…ˆä½¿ç”¨ sequential-thinking è§„åˆ’è¯„ä¼°ç­–ç•¥**

```
mcp__sequential-thinking__sequentialthinking({
  thought: "è§„åˆ’å¤æ‚åº¦è¯„ä¼°ç­–ç•¥ã€‚éœ€è¦ï¼š1) è¯»å–é—®é¢˜ 2) åˆ†æç»“æ„å¤æ‚åº¦ 3) è¯„ä¼°é¢†åŸŸæ·±åº¦ 4) ä¼°ç®—æ¨ç†æ­¥éª¤ 5) æ£€æµ‹æ­§ä¹‰ç¨‹åº¦ 6) ç»¼åˆè¯„åˆ†",
  thoughtNumber: 1,
  totalThoughts: 6,
  nextThoughtNeeded: true
})
```

**æ€è€ƒæ­¥éª¤**ï¼š

1. **é—®é¢˜è¯»å–**ï¼šè·å–åŸå§‹é—®é¢˜å†…å®¹
2. **ç»“æ„åˆ†æ**ï¼šé—®é¢˜é•¿åº¦ã€åµŒå¥—å­é—®é¢˜ã€å¥å¼å¤æ‚åº¦
3. **é¢†åŸŸè¯†åˆ«**ï¼šé—®é¢˜ç±»å‹ã€æ¶‰åŠé¢†åŸŸã€çŸ¥è¯†æ·±åº¦
4. **æ¨ç†è¯„ä¼°**ï¼šæ‰€éœ€æ¨ç†æ­¥éª¤ã€æ˜¯å¦éœ€è¦å‡è®¾éªŒè¯
5. **æ­§ä¹‰æ£€æµ‹**ï¼šç†è§£æ–¹å¼ã€éšå«å‡è®¾ã€æ¾„æ¸…éœ€æ±‚
6. **ç»¼åˆè¯„åˆ†**ï¼šåŠ æƒè®¡ç®—ã€æ·±åº¦å»ºè®®

### Step 1: è¯»å–é—®é¢˜

```
Read("${run_dir}/input.md")
```

### Step 2: ç»“æ„åŒ–å¤æ‚åº¦åˆ†æ

**ä½¿ç”¨ sequential-thinking è¿›è¡Œ 5 æ­¥åˆ†æ**ï¼š

```
mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 1 æ­¥ï¼šåˆ†æé—®é¢˜é•¿åº¦å’Œç»“æ„ã€‚é—®é¢˜å†…å®¹ï¼š'${QUESTION}'ã€‚è¯„ä¼°ï¼šé—®é¢˜é•¿åº¦ï¼ˆå­—æ•°ï¼‰ã€æ˜¯å¦æœ‰åµŒå¥—å­é—®é¢˜ã€å¥å¼å¤æ‚åº¦ã€‚",
  thoughtNumber: 1,
  totalThoughts: 5,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 2 æ­¥ï¼šè¯†åˆ«é—®é¢˜ç±»å‹å’Œé¢†åŸŸæ·±åº¦ã€‚åˆ¤æ–­ï¼šæ˜¯äº‹å®æŸ¥è¯¢ã€æ¨ç†åˆ†æã€è®¾è®¡å†³ç­–è¿˜æ˜¯ç»¼åˆé—®é¢˜ï¼Ÿæ¶‰åŠå“ªäº›é¢†åŸŸçŸ¥è¯†ï¼Ÿ",
  thoughtNumber: 2,
  totalThoughts: 5,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 3 æ­¥ï¼šè¯„ä¼°æ¨ç†æ­¥éª¤æ•°ã€‚è¿™ä¸ªé—®é¢˜éœ€è¦å¤šå°‘æ­¥éª¤æ‰èƒ½å®Œæ•´å›ç­”ï¼Ÿæ˜¯å¦éœ€è¦ä¸­é—´æ¨ç†ï¼Ÿæ˜¯å¦éœ€è¦å‡è®¾éªŒè¯ï¼Ÿ",
  thoughtNumber: 3,
  totalThoughts: 5,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 4 æ­¥ï¼šæ£€æµ‹æ­§ä¹‰ç¨‹åº¦ã€‚é—®é¢˜æ˜¯å¦æœ‰å¤šç§ç†è§£æ–¹å¼ï¼Ÿæ˜¯å¦éœ€è¦æ¾„æ¸…å‰æï¼Ÿæ˜¯å¦å­˜åœ¨éšå«å‡è®¾ï¼Ÿ",
  thoughtNumber: 4,
  totalThoughts: 5,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 5 æ­¥ï¼šç»¼åˆè¯„åˆ†å’Œå»ºè®®ã€‚åŸºäºä»¥ä¸Šåˆ†æï¼Œç»™å‡º 1-10 çš„å¤æ‚åº¦è¯„åˆ†ï¼Œå¹¶å»ºè®®æ€è€ƒæ·±åº¦ï¼ˆlight/deep/ultraï¼‰ã€‚",
  thoughtNumber: 5,
  totalThoughts: 5,
  nextThoughtNeeded: false
})
```

### Step 3: ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š

**è¾“å‡ºè·¯å¾„**ï¼š`${run_dir}/complexity-analysis.md`

**æ–‡æ¡£æ¨¡æ¿**ï¼š

```markdown
---
generated_at: { ISO 8601 æ—¶é—´æˆ³ }
analyzer_version: "1.0"
---

# å¤æ‚åº¦è¯„ä¼°æŠ¥å‘Š

## é—®é¢˜åŸæ–‡

{é—®é¢˜å†…å®¹}

## è¯„ä¼°ç»´åº¦

### 1. ç»“æ„å¤æ‚åº¦

- **é—®é¢˜é•¿åº¦**: {å­—æ•°} å­—
- **å­é—®é¢˜æ•°é‡**: {æ•°é‡}
- **ç»“æ„è¯„åˆ†**: {1-10}

### 2. é¢†åŸŸæ·±åº¦

- **é—®é¢˜ç±»å‹**: {äº‹å®æŸ¥è¯¢ / æ¨ç†åˆ†æ / è®¾è®¡å†³ç­– / ç»¼åˆé—®é¢˜}
- **æ¶‰åŠé¢†åŸŸ**: {é¢†åŸŸåˆ—è¡¨}
- **é¢†åŸŸè¯„åˆ†**: {1-10}

### 3. æ¨ç†å¤æ‚åº¦

- **é¢„ä¼°æ­¥éª¤**: {æ­¥éª¤æ•°}
- **éœ€è¦å‡è®¾éªŒè¯**: {æ˜¯/å¦}
- **æ¨ç†è¯„åˆ†**: {1-10}

### 4. æ­§ä¹‰ç¨‹åº¦

- **ç†è§£æ–¹å¼**: {å•ä¸€ / å¤šç§}
- **éšå«å‡è®¾**: {åˆ—è¡¨}
- **æ­§ä¹‰è¯„åˆ†**: {1-10}

## ç»¼åˆè¯„ä¼°

| ç»´åº¦     | è¯„åˆ† | æƒé‡ | åŠ æƒåˆ†   |
| -------- | ---- | ---- | -------- |
| ç»“æ„     | {åˆ†} | 0.2  | {åŠ æƒ}   |
| é¢†åŸŸ     | {åˆ†} | 0.3  | {åŠ æƒ}   |
| æ¨ç†     | {åˆ†} | 0.3  | {åŠ æƒ}   |
| æ­§ä¹‰     | {åˆ†} | 0.2  | {åŠ æƒ}   |
| **æ€»åˆ†** |      |      | **{æ€»}** |

## å»ºè®®

- **å¤æ‚åº¦ç­‰çº§**: {ä½ / ä¸­ / é«˜}
- **å»ºè®®æ·±åº¦**: {light / deep / ultra}
- **å»ºè®®åŸå› **: {ç®€çŸ­è¯´æ˜}

## å…³é”®è¯æ£€æµ‹

| æ£€æµ‹é¡¹       | ç»“æœ    | è§¦å‘æ·±åº¦ |
| ------------ | ------- | -------- |
| "ultrathink" | {æ˜¯/å¦} | ultra    |
| "æ·±åº¦åˆ†æ"   | {æ˜¯/å¦} | ultra    |
| "ä»”ç»†æƒ³"     | {æ˜¯/å¦} | deep     |
| "think hard" | {æ˜¯/å¦} | deep     |
| "ç®€å•"       | {æ˜¯/å¦} | light    |
```

---

## è¯„åˆ†è§„åˆ™

### å¤æ‚åº¦è¯„åˆ†æ ‡å‡†

| è¯„åˆ†èŒƒå›´ | ç­‰çº§ | å»ºè®®æ·±åº¦ | å…¸å‹åœºæ™¯                     |
| -------- | ---- | -------- | ---------------------------- |
| 1-3      | ä½   | light    | ç®€å•é—®ç­”ã€äº‹å®æŸ¥è¯¢ã€å®šä¹‰è§£é‡Š |
| 4-6      | ä¸­   | deep     | å¯¹æ¯”åˆ†æã€æ–¹æ¡ˆé€‰æ‹©ã€ä¸­ç­‰è®¾è®¡ |
| 7-10     | é«˜   | ultra    | æ¶æ„è®¾è®¡ã€å¤šæ­¥æ¨ç†ã€å¤æ‚å†³ç­– |

### å…³é”®è¯ä¼˜å…ˆçº§

å…³é”®è¯æ£€æµ‹ > å¤æ‚åº¦è¯„åˆ† > é»˜è®¤å»ºè®®

```
if åŒ…å« "ultrathink" æˆ– "æ·±åº¦åˆ†æ":
    return "ultra"
elif åŒ…å« "think hard" æˆ– "ä»”ç»†æƒ³":
    return "deep"
elif åŒ…å« "ç®€å•" æˆ– "å¿«é€Ÿ":
    return "light"
else:
    return æ ¹æ®å¤æ‚åº¦è¯„åˆ†å†³å®š
```

---

## è´¨é‡é—¨æ§

### å·¥å…·ä½¿ç”¨éªŒè¯

- [ ] è°ƒç”¨äº† `mcp__sequential-thinking__sequentialthinking` è‡³å°‘ 5 æ¬¡
- [ ] æ¯ä¸ªè¯„ä¼°ç»´åº¦éƒ½æœ‰æ˜ç¡®åˆ†æ•°
- [ ] äº§å‡º complexity-analysis.md æ–‡ä»¶

### äº§å‡ºè´¨é‡éªŒè¯

- [ ] å››ä¸ªç»´åº¦è¯„åˆ†å®Œæ•´
- [ ] ç»¼åˆè¯„åˆ†è®¡ç®—æ­£ç¡®
- [ ] æ·±åº¦å»ºè®®ä¸è¯„åˆ†åŒ¹é…
- [ ] å…³é”®è¯æ£€æµ‹ç»“æœè®°å½•

---

## è¿”å›å€¼

æˆåŠŸæ—¶è¿”å›ï¼š

```json
{
  "status": "success",
  "output_file": "${run_dir}/complexity-analysis.md",
  "complexity_score": 6.5,
  "recommended_depth": "deep",
  "keyword_override": null,
  "dimensions": {
    "structure": 5,
    "domain": 7,
    "reasoning": 8,
    "ambiguity": 6
  },
  "next_phase": {
    "phase": 3,
    "name": "multi-model-thinking",
    "depth": "deep"
  }
}
```

---

## çº¦æŸ

- å¿…é¡»ä½¿ç”¨ sequential-thinking è¿›è¡Œç»“æ„åŒ–åˆ†æ
- å¿…é¡»è¾“å‡ºå®Œæ•´çš„ complexity-analysis.md
- å…³é”®è¯æ£€æµ‹ä¼˜å…ˆäºè¯„åˆ†
- è¯„åˆ†å¿…é¡»æ˜¯ 1-10 çš„æ•´æ•°æˆ–ä¸€ä½å°æ•°
