# 思考整合策略

## 整合模式

### 1. 并行整合（Parallel Synthesis）

**适用场景**：多模型同时分析同一问题

**整合步骤**：

1. 收集各模型输出
2. 提取共识点（Agreement Points）
3. 识别分歧点（Divergence Points）
4. 构建整合视图

```
Claude Ultrathink ─────┐
                       ├──→ 整合分析 ──→ 统一结论
Codex Reasoning  ─────┤
                       │
Gemini Deep Think ────┘
```

### 2. 串行整合（Sequential Synthesis）

**适用场景**：一个模型的输出作为另一个的输入

**整合步骤**：

1. 追踪推理链路
2. 识别增强点（Enhancement Points）
3. 标记衍生结论

```
Codex 分析 ──→ Claude 重构 ──→ Gemini 验证 ──→ 最终结论
```

### 3. 交叉验证（Cross-Validation）

**适用场景**：需要高置信度的关键决策

**整合步骤**：

1. 独立执行各模型
2. 对比结论一致性
3. 标记验证状态

| 验证状态  | 条件         |
| --------- | ------------ |
| ✅ 强共识 | 3/3 模型一致 |
| ⚠️ 弱共识 | 2/3 模型一致 |
| ❌ 无共识 | 各模型分歧   |

## 整合权重

### 按任务类型分配权重

| 任务类型   | Claude | Codex | Gemini |
| ---------- | ------ | ----- | ------ |
| 架构设计   | 40%    | 40%   | 20%    |
| 代码实现   | 30%    | 50%   | 20%    |
| UI/UX 设计 | 30%    | 20%   | 50%    |
| 安全审查   | 40%    | 45%   | 15%    |
| 创意发散   | 25%    | 25%   | 50%    |

### 按置信度动态调整

```python
def adjust_weight(base_weight: float, confidence: str) -> float:
    confidence_multiplier = {
        "high": 1.2,
        "medium": 1.0,
        "low": 0.8
    }
    return base_weight * confidence_multiplier.get(confidence, 1.0)
```

## 共识提取规则

### 强共识识别

当满足以下条件时，标记为强共识：

- 多个模型得出相同结论
- 推理路径相似度 > 70%
- 关键假设一致

### 分歧处理

当出现分歧时：

1. **记录分歧点**
   - 分歧内容
   - 各模型观点
   - 推理依据

2. **分析分歧原因**
   - 假设不同
   - 上下文理解差异
   - 关注点不同

3. **提出解决建议**
   - 需要补充的信息
   - 建议的决策方式
   - 风险提示

## 输出格式

```markdown
## 整合分析

### 共识点

- [ ] 共识 1: {描述} (置信度: 高)
- [ ] 共识 2: {描述} (置信度: 中)

### 分歧点

- [ ] 分歧 1: {描述}
  - Claude: {观点}
  - Codex: {观点}
  - Gemini: {观点}
  - 建议: {处理建议}

### 整合结论

{基于共识和分歧分析的整合结论}
```
