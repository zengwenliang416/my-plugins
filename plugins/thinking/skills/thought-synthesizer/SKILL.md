---
name: thought-synthesizer
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘thinking å·¥ä½œæµ Phase 4ï¼šæ•´åˆå¤šæ¨¡å‹æ€è€ƒç»“æœ
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/synthesis.mdï¼ŒåŒ…å«æ•´åˆåˆ†æå’Œå…±è¯†/åˆ†æ­§ç‚¹
  ã€ä¸è§¦å‘ã€‘ä»…æœ‰å•æ¨¡å‹è¾“å‡ºæ—¶ï¼ˆLight æ¨¡å¼ï¼‰
  ã€å…ˆé—®ä»€ä¹ˆã€‘æ— éœ€è¯¢é—®ï¼Œè‡ªåŠ¨æ‰§è¡Œ
  ã€ğŸš¨ å¼ºåˆ¶ã€‘å¿…é¡»ä½¿ç”¨ sequential-thinking MCP è¿›è¡Œç»“æ„åŒ–æ•´åˆ
allowed-tools:
  - Read
  - Write
  - mcp__sequential-thinking__sequentialthinking
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„
  - name: depth
    type: string
    required: true
    description: æ€è€ƒæ·±åº¦ (light/deep/ultra)
---

# Thought Synthesizer - æ€è€ƒæ•´åˆåŸå­æŠ€èƒ½

## MCP å·¥å…·é›†æˆ

| MCP å·¥å…·              | ç”¨é€”                          | è§¦å‘æ¡ä»¶        |
| --------------------- | ----------------------------- | --------------- |
| `sequential-thinking` | ç»“æ„åŒ–å¤šæºæ•´åˆï¼Œå…±è¯†/åˆ†æ­§åˆ†æ | ğŸš¨ æ¯æ¬¡æ‰§è¡Œå¿…ç”¨ |

## èŒè´£è¾¹ç•Œ

æ•´åˆæ¥è‡ªå¤šä¸ªæ¨¡å‹ï¼ˆClaudeã€Codexã€Geminiï¼‰çš„æ€è€ƒç»“æœï¼Œè¯†åˆ«å…±è¯†å’Œåˆ†æ­§ã€‚

- **è¾“å…¥**: å¤šä¸ª \*-thought.md æ–‡ä»¶
- **è¾“å‡º**: `${run_dir}/synthesis.md`
- **æ ¸å¿ƒèƒ½åŠ›**: å¤šæºæ•´åˆã€å…±è¯†è¯†åˆ«ã€åˆ†æ­§åˆ†æ

---

## ğŸš¨ CRITICAL: å¼ºåˆ¶å·¥å…·ä½¿ç”¨è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ æ€è€ƒæ•´åˆ                                                     â”‚
â”‚     âœ… å¿…é¡»ä½¿ç”¨: mcp__sequential-thinking__sequentialthinking   â”‚
â”‚     âŒ ç¦æ­¢è¡Œä¸º: ç®€å•æ‹¼æ¥å„æ¨¡å‹è¾“å‡ºã€è·³è¿‡ç»“æ„åŒ–æ•´åˆ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ‰§è¡Œæµç¨‹

### Step 0: ç»“æ„åŒ–æ•´åˆè§„åˆ’ï¼ˆsequential-thinkingï¼‰

ğŸš¨ **å¿…é¡»é¦–å…ˆä½¿ç”¨ sequential-thinking è§„åˆ’æ•´åˆç­–ç•¥**

```
mcp__sequential-thinking__sequentialthinking({
  thought: "è§„åˆ’æ€è€ƒæ•´åˆç­–ç•¥ã€‚éœ€è¦ï¼š1) è¯»å–æ‰€æœ‰æ€è€ƒè¾“å‡º 2) æå–å„æ¨¡å‹æ ¸å¿ƒè§‚ç‚¹ 3) è¯†åˆ«å…±è¯†ç‚¹ 4) åˆ†æåˆ†æ­§ç‚¹ 5) å½¢æˆç»¼åˆç»“è®º 6) è¯„ä¼°æ•´ä½“ç½®ä¿¡åº¦",
  thoughtNumber: 1,
  totalThoughts: 7,
  nextThoughtNeeded: true
})
```

**æ€è€ƒæ­¥éª¤**ï¼š

1. **è¯»å–è¾“å‡º**ï¼šè·å–æ‰€æœ‰æ¨¡å‹çš„æ€è€ƒæ–‡ä»¶
2. **Claude æå–**ï¼šæå– Claude æ ¸å¿ƒè§‚ç‚¹å’Œæ¨ç†
3. **Codex æå–**ï¼šæå– Codex æŠ€æœ¯åˆ†æç»“è®º
4. **Gemini æå–**ï¼šæå– Gemini åˆ›æ–°è§‚ç‚¹
5. **å…±è¯†è¯†åˆ«**ï¼šæ‰¾å‡ºä¸€è‡´çš„é«˜ç½®ä¿¡ç»“è®º
6. **åˆ†æ­§åˆ†æ**ï¼šè¯†åˆ«ä¸åŒè§‚ç‚¹åŠå…¶åŸå› 
7. **ç»¼åˆæ•´åˆ**ï¼šå½¢æˆç»Ÿä¸€è§‚ç‚¹ï¼Œæ ‡æ³¨ç½®ä¿¡åº¦

### Step 1: è¯»å–æ‰€æœ‰æ€è€ƒè¾“å‡º

```
# è¯»å–æ‰€æœ‰å¯ç”¨çš„æ€è€ƒæ–‡ä»¶
Read("${run_dir}/claude-thought.md")

# å¦‚æœæ˜¯ deep/ultra æ¨¡å¼
if depth in ["deep", "ultra"]:
    Read("${run_dir}/codex-thought.md")
    Read("${run_dir}/gemini-thought.md")
```

### Step 2: ç»“æ„åŒ–æ•´åˆåˆ†æ

**ä½¿ç”¨ sequential-thinking è¿›è¡Œ 6 æ­¥æ•´åˆ**ï¼š

```
mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 1 æ­¥ï¼šæå– Claude æ ¸å¿ƒè§‚ç‚¹ã€‚ä» claude-thought.md ä¸­è¯†åˆ«ä¸»è¦ç»“è®ºã€å…³é”®å‡è®¾å’Œæ¨ç†æ­¥éª¤ã€‚",
  thoughtNumber: 2,
  totalThoughts: 7,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 2 æ­¥ï¼šæå– Codex æ ¸å¿ƒè§‚ç‚¹ã€‚ä» codex-thought.md ä¸­è¯†åˆ«æŠ€æœ¯åˆ†æç»“è®ºã€å®ç°å»ºè®®å’Œé£é™©è¯„ä¼°ã€‚",
  thoughtNumber: 3,
  totalThoughts: 7,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 3 æ­¥ï¼šæå– Gemini æ ¸å¿ƒè§‚ç‚¹ã€‚ä» gemini-thought.md ä¸­è¯†åˆ«å¤šè§†è§’åˆ†æã€åˆ›æ–°è§‚ç‚¹å’Œç”¨æˆ·ä½“éªŒå»ºè®®ã€‚",
  thoughtNumber: 4,
  totalThoughts: 7,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 4 æ­¥ï¼šè¯†åˆ«å…±è¯†ç‚¹ã€‚å¯¹æ¯”ä¸‰ä¸ªæ¨¡å‹çš„æ ¸å¿ƒè§‚ç‚¹ï¼Œæ‰¾å‡ºä¸€è‡´çš„ç»“è®ºï¼ˆé«˜ç½®ä¿¡åº¦ï¼‰ã€‚",
  thoughtNumber: 5,
  totalThoughts: 7,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 5 æ­¥ï¼šåˆ†æåˆ†æ­§ç‚¹ã€‚è¯†åˆ«å„æ¨¡å‹ä¸åŒçš„è§‚ç‚¹ï¼Œåˆ†æåˆ†æ­§åŸå› ï¼Œè¯„ä¼°å“ªä¸ªè§‚ç‚¹æ›´å¯é ã€‚",
  thoughtNumber: 6,
  totalThoughts: 7,
  nextThoughtNeeded: true
})

mcp__sequential-thinking__sequentialthinking({
  thought: "ç¬¬ 6 æ­¥ï¼šç»¼åˆæ•´åˆã€‚åŸºäºå…±è¯†å’Œåˆ†æ­§åˆ†æï¼Œå½¢æˆç»Ÿä¸€çš„ç»¼åˆè§‚ç‚¹ï¼Œæ ‡æ³¨ç½®ä¿¡åº¦ã€‚",
  thoughtNumber: 7,
  totalThoughts: 7,
  nextThoughtNeeded: false
})
```

### Step 3: ç”Ÿæˆæ•´åˆæŠ¥å‘Š

**è¾“å‡ºè·¯å¾„**ï¼š`${run_dir}/synthesis.md`

**æ–‡æ¡£æ¨¡æ¿**ï¼š

```markdown
---
generated_at: { ISO 8601 æ—¶é—´æˆ³ }
synthesizer_version: "1.0"
models_integrated: ["claude", "codex", "gemini"]
depth: { light / deep / ultra }
---

# æ€è€ƒæ•´åˆæŠ¥å‘Š

## æ•´åˆæ¦‚è¿°

- **å‚ä¸æ¨¡å‹**: { æ¨¡å‹åˆ—è¡¨ }
- **æ€è€ƒæ·±åº¦**: { depth }
- **æ•´åˆæ–¹æ³•**: ç»“æ„åŒ–å¤šæºæ•´åˆ

## å„æ¨¡å‹æ ¸å¿ƒè§‚ç‚¹

### Claude è§†è§’

**æ ¸å¿ƒç»“è®º**:
{Claude çš„ä¸»è¦ç»“è®º}

**å…³é”®æ¨ç†**:
{å…³é”®æ¨ç†æ­¥éª¤}

**ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }

### Codex è§†è§’

**æ ¸å¿ƒç»“è®º**:
{Codex çš„ä¸»è¦ç»“è®º}

**æŠ€æœ¯åˆ†æ**:
{æŠ€æœ¯å®ç°åˆ†æ}

**ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }

### Gemini è§†è§’

**æ ¸å¿ƒç»“è®º**:
{Gemini çš„ä¸»è¦ç»“è®º}

**åˆ›æ–°è§‚ç‚¹**:
{ç‹¬ç‰¹çš„åˆ›æ–°è§è§£}

**ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }

## å…±è¯†åˆ†æ

### é«˜ç½®ä¿¡å…±è¯†ç‚¹

| åºå· | å…±è¯†å†…å®¹   | æ”¯æŒæ¨¡å‹     | ç½®ä¿¡åº¦ |
| ---- | ---------- | ------------ | ------ |
| 1    | {å…±è¯†ç‚¹ 1} | å…¨éƒ¨         | é«˜     |
| 2    | {å…±è¯†ç‚¹ 2} | Claude+Codex | é«˜     |
| ...  | ...        | ...          | ...    |

### å…±è¯†æ€»ç»“

{å¯¹å…±è¯†ç‚¹çš„ç»¼åˆæè¿°}

## åˆ†æ­§åˆ†æ

### åˆ†æ­§ç‚¹ 1: {åˆ†æ­§ä¸»é¢˜}

| æ¨¡å‹   | è§‚ç‚¹          | ç†ç”±   |
| ------ | ------------- | ------ |
| Claude | {Claude è§‚ç‚¹} | {ç†ç”±} |
| Codex  | {Codex è§‚ç‚¹}  | {ç†ç”±} |
| Gemini | {Gemini è§‚ç‚¹} | {ç†ç”±} |

**åˆ†æ­§åˆ†æ**: {ä¸ºä»€ä¹ˆäº§ç”Ÿåˆ†æ­§ï¼Œå“ªä¸ªæ›´å¯é }

**å»ºè®®é‡‡çº³**: {æ¨èçš„è§‚ç‚¹} | åŸå› : {ç†ç”±}

### åˆ†æ­§ç‚¹ 2: {åˆ†æ­§ä¸»é¢˜}

{... åŒä¸Šæ ¼å¼ ...}

## ç»¼åˆæ•´åˆç»“è®º

### ç»Ÿä¸€è§‚ç‚¹

{åŸºäºå…±è¯†å’Œåˆ†æ­§åˆ†æå½¢æˆçš„ç»Ÿä¸€ç»¼åˆè§‚ç‚¹}

### ä¿ç•™çš„ä¸ç¡®å®šæ€§

{æ— æ³•ç¡®å®šçš„é—®é¢˜ï¼Œéœ€è¦è¿›ä¸€æ­¥æ¢ç´¢}

### æ•´åˆç½®ä¿¡åº¦

- **æ•´ä½“ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }
- **ç½®ä¿¡åº¦è¯´æ˜**: {ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªç½®ä¿¡åº¦}

## å¤šæ¨¡å‹è´¡çŒ®åˆ†æ

| æ¨¡å‹   | ä¸»è¦è´¡çŒ®   | ç‹¬ç‰¹ä»·å€¼   |
| ------ | ---------- | ---------- |
| Claude | {è´¡çŒ®æè¿°} | {ç‹¬ç‰¹ä»·å€¼} |
| Codex  | {è´¡çŒ®æè¿°} | {ç‹¬ç‰¹ä»·å€¼} |
| Gemini | {è´¡çŒ®æè¿°} | {ç‹¬ç‰¹ä»·å€¼} |
```

---

## Light æ¨¡å¼å¤„ç†

å½“åªæœ‰ Claude å•æ¨¡å‹è¾“å‡ºæ—¶ï¼š

```markdown
---
generated_at: { ISO 8601 æ—¶é—´æˆ³ }
synthesizer_version: "1.0"
models_integrated: ["claude"]
depth: light
---

# æ€è€ƒæ•´åˆæŠ¥å‘Šï¼ˆLight æ¨¡å¼ï¼‰

## æ•´åˆæ¦‚è¿°

- **å‚ä¸æ¨¡å‹**: Claude
- **æ€è€ƒæ·±åº¦**: light
- **è¯´æ˜**: å•æ¨¡å‹æ¨¡å¼ï¼Œæ— å¤šæºæ•´åˆ

## Claude åˆ†æç»“æœ

{ç›´æ¥å¼•ç”¨ claude-thought.md çš„æ ¸å¿ƒå†…å®¹}

## ç»“è®º

{Claude çš„æ ¸å¿ƒç»“è®º}

## ç½®ä¿¡åº¦

- **æ•´ä½“ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }
- **è¯´æ˜**: å•æ¨¡å‹åˆ†æï¼Œå»ºè®®å¤æ‚é—®é¢˜ä½¿ç”¨ deep/ultra æ¨¡å¼è·å–å¤šè§†è§’
```

---

## è´¨é‡é—¨æ§

### å·¥å…·ä½¿ç”¨éªŒè¯

- [ ] è°ƒç”¨äº† `mcp__sequential-thinking__sequentialthinking` è‡³å°‘ 7 æ¬¡
- [ ] è¯»å–äº†æ‰€æœ‰å¯ç”¨çš„ thought.md æ–‡ä»¶
- [ ] äº§å‡º synthesis.md æ–‡ä»¶

### äº§å‡ºè´¨é‡éªŒè¯

- [ ] å„æ¨¡å‹æ ¸å¿ƒè§‚ç‚¹æå–å®Œæ•´
- [ ] å…±è¯†ç‚¹æœ‰æ˜ç¡®åˆ—è¡¨
- [ ] åˆ†æ­§ç‚¹æœ‰åˆ†æå’Œé‡‡çº³å»ºè®®
- [ ] ç»¼åˆç»“è®ºç›´æ¥åŸºäºåˆ†æç»“æœ
- [ ] æ•´ä½“ç½®ä¿¡åº¦æœ‰åˆç†è¯´æ˜

---

## è¿”å›å€¼

æˆåŠŸæ—¶è¿”å›ï¼š

```json
{
  "status": "success",
  "output_file": "${run_dir}/synthesis.md",
  "models_integrated": ["claude", "codex", "gemini"],
  "consensus_count": 5,
  "divergence_count": 2,
  "overall_confidence": "high",
  "key_synthesis": "ç»¼åˆè§‚ç‚¹æ‘˜è¦",
  "next_phase": {
    "phase": 5,
    "name": "conclusion-generator"
  }
}
```

---

## çº¦æŸ

- å¿…é¡»ä½¿ç”¨ sequential-thinking è¿›è¡Œç»“æ„åŒ–æ•´åˆ
- ä¸ç®€å•æ‹¼æ¥ï¼Œè¦çœŸæ­£åˆ†æå’Œç»¼åˆ
- æ˜ç¡®æ ‡æ³¨å…±è¯†å’Œåˆ†æ­§
- åˆ†æ­§ç‚¹éœ€è¦ç»™å‡ºé‡‡çº³å»ºè®®
- ä¿ç•™ä¸ç¡®å®šæ€§ï¼Œä¸å¼ºè¡Œç»Ÿä¸€
