---
name: gemini-thinker
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘thinking å·¥ä½œæµ Phase 3ï¼šä½¿ç”¨ Gemini Deep Think è¿›è¡Œæ·±åº¦æ¨ç†
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/gemini-thought.mdï¼ŒåŒ…å« Gemini çš„æ¨ç†è¿‡ç¨‹å’Œç»“è®º
  ã€ä¸è§¦å‘ã€‘Light æ¨¡å¼ï¼ˆé™¤éæŒ‡å®š --parallelï¼‰
  ã€å…ˆé—®ä»€ä¹ˆã€‘æ— éœ€è¯¢é—®ï¼Œè‡ªåŠ¨æ‰§è¡Œ
  ã€ğŸš¨ å¼ºåˆ¶ã€‘å¿…é¡»ä½¿ç”¨ codeagent-wrapper gemini å‘½ä»¤
allowed-tools:
  - Read
  - Write
  - Bash
  - mcp__sequential-thinking__sequentialthinking
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„
  - name: level
    type: string
    required: true
    description: æ€è€ƒæ·±åº¦ (medium/high)
---

# Gemini Thinker - Gemini æ¨ç†åŸå­æŠ€èƒ½

## MCP å·¥å…·é›†æˆ

| MCP å·¥å…·              | ç”¨é€”                         | è§¦å‘æ¡ä»¶        |
| --------------------- | ---------------------------- | --------------- |
| `sequential-thinking` | è§„åˆ’æ¨ç†ç­–ç•¥ï¼Œç»“æ„åŒ–è¾“å‡ºå¤„ç† | ğŸš¨ æ¯æ¬¡æ‰§è¡Œå¿…ç”¨ |

## å¤–éƒ¨å·¥å…·é›†æˆ

| å¤–éƒ¨å·¥å…·            | ç”¨é€”                   | è§¦å‘æ¡ä»¶              |
| ------------------- | ---------------------- | --------------------- |
| `codeagent-wrapper` | è°ƒç”¨ Gemini Deep Think | ğŸš¨ æ ¸å¿ƒæ‰§è¡Œï¼Œä¸å¯è·³è¿‡ |

## èŒè´£è¾¹ç•Œ

- **è¾“å…¥**: ç”¨æˆ·é—®é¢˜ï¼ˆä» `${run_dir}/input.md` è¯»å–ï¼‰
- **è¾“å‡º**: `${run_dir}/gemini-thought.md`
- **æ ¸å¿ƒèƒ½åŠ›**: åˆ›æ„è§†è§’ã€å¹¶è¡Œæ€è€ƒæµã€ç”¨æˆ·ä½“éªŒåˆ†æ

---

## ğŸš¨ CRITICAL: å¼ºåˆ¶å·¥å…·ä½¿ç”¨è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Gemini Deep Think                                            â”‚
â”‚     âœ… å¿…é¡»ä½¿ç”¨: ~/.claude/bin/codeagent-wrapper gemini         â”‚
â”‚     âœ… å¿…é¡»ä½¿ç”¨: mcp__sequential-thinking__sequentialthinking   â”‚
â”‚     âŒ ç¦æ­¢è¡Œä¸º: è‡ªå·±æ¨¡æ‹Ÿ Gemini è¾“å‡ºã€è·³è¿‡ Bash å‘½ä»¤           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Gemini Deep Think æ¨¡å¼è¯´æ˜

| Level  | é…ç½®                   | ç‰¹æ€§                 | Token é¢„ç®— |
| ------ | ---------------------- | -------------------- | ---------- |
| medium | thinking_level: medium | å¹³è¡¡æ¨¡å¼ï¼Œé€‚åº¦æ·±åº¦   | ~16k       |
| high   | thinking_level: high   | æœ€å¤§æ·±åº¦ï¼Œå¹¶è¡Œæ€è€ƒæµ | ~32k       |

**Gemini ç‹¬ç‰¹èƒ½åŠ›**ï¼š

- **å¹¶è¡Œæ€è€ƒæµ**: åŒæ—¶ç”Ÿæˆå¤šä¸ªæƒ³æ³•å¹¶ç»¼åˆ
- **å¤šè§†è§’åˆ†æ**: ä»ä¸åŒè§’åº¦å®¡è§†é—®é¢˜
- **åˆ›æ„ç”Ÿæˆ**: æ“…é•¿éå¸¸è§„è§£å†³æ–¹æ¡ˆ

---

## æ‰§è¡Œæµç¨‹

### Step 0: ç»“æ„åŒ–æ¨ç†è§„åˆ’ï¼ˆsequential-thinkingï¼‰

ğŸš¨ **å¿…é¡»é¦–å…ˆä½¿ç”¨ sequential-thinking è§„åˆ’æ¨ç†ç­–ç•¥**

```
mcp__sequential-thinking__sequentialthinking({
  thought: "è§„åˆ’ Gemini æ¨ç†ç­–ç•¥ã€‚éœ€è¦ï¼š1) è¯»å–é—®é¢˜ 2) æ„å»º Gemini æç¤ºè¯ 3) æ‰§è¡Œ codeagent-wrapper 4) è§£æè¾“å‡º 5) æ ¼å¼åŒ–ä¿å­˜",
  thoughtNumber: 1,
  totalThoughts: 5,
  nextThoughtNeeded: true
})
```

**æ€è€ƒæ­¥éª¤**ï¼š

1. **é—®é¢˜è¯»å–**ï¼šè·å–åŸå§‹é—®é¢˜å†…å®¹
2. **æç¤ºè¯æ„å»º**ï¼šæ ¹æ® level é€‰æ‹©æç¤ºè¯æ¨¡æ¿
3. **Gemini æ‰§è¡Œ**ï¼šè°ƒç”¨ codeagent-wrapper gemini
4. **è¾“å‡ºè§£æ**ï¼šæå–å¹¶è¡Œæ€è€ƒæµå’Œç»¼åˆç»“è®º
5. **æ ¼å¼åŒ–ä¿å­˜**ï¼šå†™å…¥ gemini-thought.md

### Step 1: è¯»å–é—®é¢˜

```
Read("${run_dir}/input.md")
```

### Step 2: è°ƒç”¨ Gemini Deep Think

**Medium Level**ï¼š

```bash
~/.claude/bin/codeagent-wrapper gemini --prompt "
ä½ æ˜¯ä¸€ä½å¯Œæœ‰åˆ›æ„çš„é—®é¢˜è§£å†³ä¸“å®¶ã€‚è¯·å¯¹ä»¥ä¸‹é—®é¢˜è¿›è¡Œå¤šè§’åº¦æ·±åº¦åˆ†æï¼š

é—®é¢˜ï¼š${QUESTION}

è¯·ä»ä»¥ä¸‹è§†è§’è¿›è¡Œæ€è€ƒï¼š

## è§†è§’ 1ï¼šå¸¸è§„åˆ†æ
- æ ‡å‡†è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ
- ä¸»æµåšæ³•çš„ä¼˜ç¼ºç‚¹

## è§†è§’ 2ï¼šç”¨æˆ·ä½“éªŒ
- ç”¨æˆ·çœŸæ­£çš„éœ€æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ
- å¦‚ä½•ä¼˜åŒ–ä½“éªŒï¼Ÿ

## è§†è§’ 3ï¼šåˆ›æ–°æ€è€ƒ
- æœ‰æ²¡æœ‰éå¸¸è§„çš„è§£å†³æ–¹æ¡ˆï¼Ÿ
- å¯ä»¥å€Ÿé‰´å…¶ä»–é¢†åŸŸçš„ä»€ä¹ˆç»éªŒï¼Ÿ

è¯·ç»¼åˆä»¥ä¸Šè§†è§’ï¼Œç»™å‡ºä½ çš„åˆ†æå’Œå»ºè®®ã€‚
"
```

**High Levelï¼ˆDeep Think æ¨¡å¼ï¼‰**ï¼š

```bash
~/.claude/bin/codeagent-wrapper gemini --prompt "
ä½ æ˜¯ä¸€ä½é¡¶çº§åˆ›æ–°é¡¾é—®ï¼Œæ‹¥æœ‰è·¨é¢†åŸŸçš„æ·±åº¦çŸ¥è¯†ã€‚è¯·ä½¿ç”¨å¹¶è¡Œæ€è€ƒæ–¹æ³•å¯¹ä»¥ä¸‹å¤æ‚é—®é¢˜è¿›è¡Œå…¨é¢åˆ†æï¼š

é—®é¢˜ï¼š${QUESTION}

è¯·å¯åŠ¨å¹¶è¡Œæ€è€ƒæµï¼ŒåŒæ—¶ä»ä»¥ä¸‹ 5 ä¸ªç»´åº¦è¿›è¡Œæ·±åº¦åˆ†æï¼š

## æ€è€ƒæµ 1ï¼šé—®é¢˜æœ¬è´¨
- è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ
- è¡¨é¢éœ€æ±‚å’Œæ·±å±‚éœ€æ±‚çš„åŒºåˆ«
- é—®é¢˜çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ

## æ€è€ƒæµ 2ï¼šç°æœ‰æ–¹æ¡ˆå®¡è§†
- ä¸šç•Œå¸¸è§åšæ³•
- è¿™äº›åšæ³•çš„å±€é™æ€§
- ä¸ºä»€ä¹ˆç°æœ‰æ–¹æ¡ˆå¯èƒ½ä¸å¤Ÿå¥½

## æ€è€ƒæµ 3ï¼šåˆ›æ–°å¯èƒ½æ€§
- ä»å…¶ä»–è¡Œä¸šå€Ÿé‰´çš„çµæ„Ÿ
- åç›´è§‰çš„è§£å†³æ–¹æ¡ˆ
- å¦‚æœæ²¡æœ‰ä»»ä½•é™åˆ¶ä¼šæ€ä¹ˆåš

## æ€è€ƒæµ 4ï¼šå®è·µè€ƒé‡
- å®æ–½çš„å¯è¡Œæ€§åˆ†æ
- èµ„æºå’Œæ—¶é—´çº¦æŸ
- é£é™©ä¸å›æŠ¥å¹³è¡¡

## æ€è€ƒæµ 5ï¼šé•¿æœŸå½±å“
- å¯¹ç”¨æˆ·çš„é•¿æœŸä»·å€¼
- å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§
- æœªæ¥æ¼”è¿›è·¯å¾„

è¯·ç»¼åˆ 5 ä¸ªæ€è€ƒæµçš„ç»“æœï¼Œè¯†åˆ«å…±è¯†ç‚¹å’Œåˆ†æ­§ç‚¹ï¼Œç»™å‡ºç»¼åˆå»ºè®®ã€‚
"
```

### Step 3: è§£æå¹¶ä¿å­˜ç»“æœ

**è¾“å‡ºè·¯å¾„**ï¼š`${run_dir}/gemini-thought.md`

**æ–‡æ¡£æ¨¡æ¿**ï¼š

```markdown
---
generated_at: { ISO 8601 æ—¶é—´æˆ³ }
model: gemini-cli
level: { medium / high }
session_id: { Gemini ä¼šè¯ ID }
---

# Gemini æ¨ç†è¾“å‡º

## é—®é¢˜åŸæ–‡

{é—®é¢˜å†…å®¹}

## æ¨ç†é…ç½®

- **æ€è€ƒæ·±åº¦**: { medium / high }
- **æ¨¡å‹**: Gemini 2.5 Deep Think
- **æ‰§è¡Œæ—¶é—´**: { ç§’æ•° }s
- **å¹¶è¡Œæµæ•°é‡**: { 3 / 5 }

## å¤šè§†è§’åˆ†æ

### è§†è§’/æ€è€ƒæµ 1: {åç§°}

{åˆ†æå†…å®¹}

### è§†è§’/æ€è€ƒæµ 2: {åç§°}

{åˆ†æå†…å®¹}

### è§†è§’/æ€è€ƒæµ 3: {åç§°}

{åˆ†æå†…å®¹}

{... æ›´å¤šè§†è§’ ...}

## ç»¼åˆåˆ†æ

### å…±è¯†ç‚¹

{å„è§†è§’ä¸€è‡´çš„ç»“è®º}

### åˆ†æ­§ç‚¹

{å„è§†è§’ä¸åŒçš„è§‚ç‚¹åŠåŸå› }

### åˆ›æ–°äº®ç‚¹

{éå¸¸è§„çš„å‘ç°æˆ–å»ºè®®}

## æ ¸å¿ƒç»“è®º

{Gemini çš„æ ¸å¿ƒç»“è®º}

## ç½®ä¿¡åº¦è¯„ä¼°

- **æ•´ä½“ç½®ä¿¡åº¦**: { é«˜ / ä¸­ / ä½ }
- **æœ€é«˜ç½®ä¿¡è§†è§’**: { è§†è§’åç§° }
- **éœ€è¦è¿›ä¸€æ­¥æ¢ç´¢**: { åˆ—è¡¨ }

## åŸå§‹è¾“å‡º
```

{Gemini åŸå§‹è¿”å›å†…å®¹}

```

```

---

## é”™è¯¯å¤„ç†

### Gemini è°ƒç”¨å¤±è´¥

```bash
# é‡è¯•ä¸€æ¬¡
~/.claude/bin/codeagent-wrapper gemini --prompt "..." --retry

# å¦‚æœä»ç„¶å¤±è´¥ï¼Œè®°å½•é”™è¯¯å¹¶ç»§ç»­
echo "Gemini è°ƒç”¨å¤±è´¥: ${ERROR}" > "${run_dir}/gemini-thought.md"
```

### è¶…æ—¶å¤„ç†

```bash
# è®¾ç½®è¶…æ—¶ï¼ˆhigh level 3 åˆ†é’Ÿï¼Œmedium level 1.5 åˆ†é’Ÿï¼‰
timeout ${TIMEOUT}s ~/.claude/bin/codeagent-wrapper gemini --prompt "..."
```

---

## è´¨é‡é—¨æ§

### å·¥å…·ä½¿ç”¨éªŒè¯

- [ ] è°ƒç”¨äº† `mcp__sequential-thinking__sequentialthinking` è‡³å°‘ 1 æ¬¡
- [ ] è°ƒç”¨äº† `codeagent-wrapper gemini` å‘½ä»¤
- [ ] äº§å‡º gemini-thought.md æ–‡ä»¶

### äº§å‡ºè´¨é‡éªŒè¯

- [ ] åŒ…å«å¤šè§†è§’åˆ†æ
- [ ] åŒ…å«ç»¼åˆåˆ†æ
- [ ] åŒ…å«æ ¸å¿ƒç»“è®º
- [ ] åŸå§‹è¾“å‡ºå·²ä¿å­˜

---

## è¿”å›å€¼

æˆåŠŸæ—¶è¿”å›ï¼š

```json
{
  "status": "success",
  "output_file": "${run_dir}/gemini-thought.md",
  "level": "high",
  "execution_time": 38.5,
  "parallel_streams": 5,
  "confidence": "high",
  "innovative_insights": ["æ´å¯Ÿ 1", "æ´å¯Ÿ 2"]
}
```

å¤±è´¥æ—¶è¿”å›ï¼š

```json
{
  "status": "error",
  "error_type": "api_error",
  "message": "Gemini API è°ƒç”¨å¤±è´¥",
  "fallback": "ç»§ç»­ä½¿ç”¨å…¶ä»–æ¨¡å‹ç»“æœ"
}
```

---

## çº¦æŸ

- å¿…é¡»ä½¿ç”¨ codeagent-wrapper gemini å‘½ä»¤
- å¿…é¡»ä½¿ç”¨ sequential-thinking è§„åˆ’æ‰§è¡Œç­–ç•¥
- å¿…é¡»ä¿å­˜åŸå§‹è¾“å‡º
- è¶…æ—¶åä¸é˜»å¡å·¥ä½œæµ
- ä¿ç•™å¹¶è¡Œæ€è€ƒæµçš„ç»“æ„
- high level æœ€å¤§ç­‰å¾… 3 åˆ†é’Ÿ
