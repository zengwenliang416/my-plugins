---
name: article-outliner
description: |
  【触发条件】写作工作流第二步：基于分析报告生成结构化文章大纲。
  【输入】${RUN_DIR}/input.md + ${RUN_DIR}/analysis.md
  【输出】${RUN_DIR}/outline.md（层级大纲）
  【不触发】已有大纲时，或跳过分析直接写作的场景。
allowed-tools: ["Read", "Write"]
---

# Article Outliner - 大纲生成技能

## 职责

基于主题和分析报告，生成层级清晰、逻辑严密的文章大纲，为后续写作提供结构框架。

## 输入输出契约

### 输入

- **必需**:
  - `${RUN_DIR}/input.md` - 主题描述
  - `${RUN_DIR}/analysis.md` - 分析报告（由 article-analyzer 生成）
- **格式**: Markdown 文档，analysis.md 必须包含 frontmatter

### 输出

- **路径**: `${RUN_DIR}/outline.md`
- **格式**: 结构化 Markdown 大纲，包含 YAML frontmatter

### 产物 Frontmatter 模板

```yaml
---
step: article-outliner
inputs: ["input.md", "analysis.md"]
created_at: 2026-01-14T10:31:00Z
topic: "文章主题"
structure: "linear|problem-solution|comparison|narrative"
sections: 5
estimated_words: 2000
---
```

## 大纲结构原则

### 1. 层级设计（3-4 层）

```
H1 标题（文章主标题）
  H2 章节（3-7 个主要章节）
    H3 小节（每章节 2-5 个小节）
      H4 要点（可选，细节展开）
```

### 2. 结构模式

#### Linear（线性结构）

适用于：教程、流程说明

```
1. 引言
2. 背景/基础
3. 主体内容（分步骤）
4. 总结/展望
```

#### Problem-Solution（问题-解决方案）

适用于：技术方案、分析报告

```
1. 问题定义
2. 现状分析
3. 解决方案
4. 效果评估
5. 结论
```

#### Comparison（对比分析）

适用于：技术选型、竞品分析

```
1. 引言
2. 方案 A 分析
3. 方案 B 分析
4. 对比总结
5. 建议
```

#### Narrative（叙事结构）

适用于：案例研究、故事化内容

```
1. 背景铺垫
2. 问题/冲突出现
3. 过程/探索
4. 解决/转折
5. 反思/启示
```

### 3. 内容分配

- **引言**：10-15%
- **主体**：70-80%
- **结论**：10-15%

## 执行流程

1. **读取输入**

   ```
   Read ${RUN_DIR}/input.md
   Read ${RUN_DIR}/analysis.md
   ```

2. **提取关键信息**
   - 从 analysis.md 的 frontmatter 获取：topic, difficulty, estimated_words
   - 从 analysis.md 正文提取：核心问题、论点、建议案例

3. **选择结构模式**
   根据主题类型和写作建议，选择合适的结构模式

4. **生成大纲**

   ```markdown
   ---
   step: article-outliner
   inputs: ["input.md", "analysis.md"]
   created_at: <timestamp>
   topic: "<主题>"
   structure: "<结构模式>"
   sections: <章节数>
   estimated_words: <预计字数>
   ---

   # <文章标题>

   ## 1. 引言

   ### 1.1 背景

   - <要点 1>
   - <要点 2>

   ### 1.2 核心问题

   - <问题陈述>

   ## 2. <主体章节 1>

   ### 2.1 <小节 1>

   - <要点>
   - <案例/数据>

   ### 2.2 <小节 2>

   - <要点>

   ## 3. <主体章节 2>

   ...

   ## N. 结论

   ### N.1 总结

   - <核心要点回顾>

   ### N.2 展望

   - <未来趋势/建议>
   ```

5. **写入产物**
   ```
   Write ${RUN_DIR}/outline.md <content>
   ```

## 质量标准

### 必须满足

- ✅ 产物文件包含有效的 YAML frontmatter
- ✅ 大纲层级清晰（H1-H4 标记正确）
- ✅ 逻辑流畅（章节顺序合理）
- ✅ 覆盖分析报告中的核心问题
- ✅ 字数分配合理（符合 estimated_words）

### 应该满足

- 每个章节有简短说明（不只是标题）
- 关键要点用列表标记
- 预留案例/数据位置
- 结构与写作风格匹配

### 不应出现

- ❌ 单个章节过长（超过 40% 内容）
- ❌ 章节数过多（超过 7 个主章节）
- ❌ 层级过深（超过 H4）
- ❌ 逻辑跳跃（缺少过渡）

## 失败处理

### 分析报告缺失

- **症状**: `analysis.md` 不存在
- **处理**: 返回错误，提示先运行 article-analyzer

### 分析报告不完整

- **症状**: frontmatter 缺少必需字段
- **处理**: 尝试从正文提取信息，或使用默认值

### 主题过于复杂

- **症状**: 核心问题超过 5 个，难以组织
- **处理**: 在 outline.md 顶部添加注释，建议拆分主题

## 示例

### 输入 (analysis.md frontmatter)

```yaml
---
topic: "AI 在医疗诊断中的应用前景"
difficulty: "medium"
estimated_words: 2000
---
```

### 输出 (outline.md)

```markdown
---
step: article-outliner
inputs: ["input.md", "analysis.md"]
created_at: 2026-01-14T10:31:00Z
topic: "AI 在医疗诊断中的应用前景"
structure: "problem-solution"
sections: 5
estimated_words: 2000
---

# AI 在医疗诊断中的应用前景

## 1. 引言（~200 字）

### 1.1 医疗诊断的挑战

- 诊断准确性依赖医生经验
- 影像判读耗时且易疲劳
- 偏远地区医疗资源不足

### 1.2 AI 技术的契机

- 深度学习在图像识别的突破
- 医疗数据数字化的普及
- 算力成本的下降

## 2. AI 医疗诊断的主要技术（~400 字）

### 2.1 影像识别技术

- **CT/X 光片分析**：肺结节、骨折检测
- **眼底图像**：糖尿病视网膜病变筛查
- **病理切片**：癌症组织识别
- 案例：DeepMind 眼病筛查系统

### 2.2 多模态融合诊断

- 结合影像 + 病历 + 基因数据
- 案例：IBM Watson Health

### 2.3 辅助决策系统

- 治疗方案推荐
- 药物相互作用预警

## 3. 当前应用现状与效果（~500 字）

### 3.1 准确率对比

- 影像识别：AI vs 人类医生对比数据
- 研究数据：Nature Medicine 等权威文献

### 3.2 实际部署案例

- 国内：平安智慧医疗
- 国外：Google Health, PathAI
- 部署规模、使用场景、反馈

### 3.3 辅助 vs 替代

- AI 的优势：速度、一致性、疲劳免疫
- 局限：缺乏临床综合判断、解释性不足

## 4. 面临的挑战（~500 字）

### 4.1 技术挑战

- 数据质量与标注成本
- 模型泛化能力（不同设备、不同人群）
- 黑盒问题与可解释性

### 4.2 伦理与法律挑战

- 医疗责任归属（AI 误诊谁负责？）
- 数据隐私与安全
- 医患信任（患者是否接受 AI 诊断）

### 4.3 落地挑战

- 监管审批流程
- 与现有医疗系统集成
- 医生培训与接受度

## 5. 未来发展趋势（~300 字）

### 5.1 技术演进方向

- 小样本学习与迁移学习
- 多中心联邦学习（隐私保护）
- AI + 医生协作模式优化

### 5.2 政策与标准化

- 监管框架的建立
- 性能评估标准
- 跨国合作与数据共享

### 5.3 展望（3-5 年）

- AI 从辅助工具到标准配置
- 从影像诊断扩展到更多医学领域
- 个性化医疗的实现

## 6. 结论（~100 字）

### 6.1 核心观点总结

- AI 医疗诊断前景广阔，但仍处于协作阶段
- 技术进步需与伦理、法律、临床实践同步

### 6.2 对读者的建议

- 医疗从业者：拥抱技术，提升 AI 素养
- 技术人员：深入医疗场景，关注伦理合规
- 患者：理性看待 AI，信任人机协作
```

## 注意事项

1. **依赖分析报告**：必须先读取 analysis.md，不能凭空生成大纲
2. **保持灵活性**：大纲是框架，写作时可调整
3. **字数分配**：每个章节标注预计字数，帮助控制篇幅
4. **要点而非全文**：大纲只列要点，不要写成完整段落

## 参考资源

- `references/outline-template.md` - 大纲模板库（多种结构）
- `references/structure-patterns.md` - 结构模式详解
- `references/word-allocation-guide.md` - 字数分配指南
