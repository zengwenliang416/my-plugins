---
name: content-writer
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘è§„åˆ’å·¥ä½œæµç¬¬ä¸‰æ­¥ï¼šåŸºäºå¤§çº²å’Œç´ æç¼–å†™å„ç« èŠ‚å†…å®¹ã€‚
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/chapter-*.mdï¼ŒåŒ…å«å…·ä½“å¯æ‰§è¡Œçš„æ­¥éª¤ã€‚
  ã€ä¸è§¦å‘ã€‘ç´ æç ”ç©¶ï¼ˆç”¨ context-researcherï¼‰ã€æ–‡æ¡£å®¡æŸ¥ï¼ˆç”¨ document-reviewerï¼‰ã€‚
allowed-tools: Read, Write, Bash, Task
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„ï¼ˆç”± orchestrator ä¼ å…¥ï¼‰
---

# Content Writer - å†…å®¹ç¼–å†™åŸå­æŠ€èƒ½

## èŒè´£è¾¹ç•Œ

- **è¾“å…¥**: `${run_dir}` + `${run_dir}/outline.md` + `${run_dir}/materials.md` æ–‡ä»¶è·¯å¾„
- **è¾“å‡º**: `${run_dir}/chapter-*.md`
- **å•ä¸€èŒè´£**: åªåšå†…å®¹ç¼–å†™ï¼Œä¸åšç´ æç ”ç©¶æˆ–å®¡æŸ¥

## æ‰§è¡Œæµç¨‹

### Step 1: è¯»å–è¾“å…¥

```bash
è¯»å– ${run_dir}/outline.md
è¯»å– ${run_dir}/materials.md
æå–: å­ä»»åŠ¡åˆ—è¡¨ã€ç´ æåº“ã€æŠ€æœ¯çº¦æŸ
```

### Step 2: ä»»åŠ¡ç±»å‹åˆ¤æ–­

æ ¹æ®å¤§çº²åˆ¤æ–­ç¼–å†™ç­–ç•¥ï¼š

| ä»»åŠ¡ç±»å‹  | ç« èŠ‚åˆ†é…      | æ¨¡å‹è·¯ç”±    |
| --------- | ------------- | ----------- |
| frontend  | UI/äº¤äº’ç« èŠ‚   | Gemini ä¸»å¯¼ |
| backend   | é€»è¾‘/æ•°æ®ç« èŠ‚ | Codex ä¸»å¯¼  |
| fullstack | å‰åç«¯åˆ†ç¦»    | å¹¶è¡Œç¼–å†™    |

### Step 3: è°ƒç”¨å¤–éƒ¨æ¨¡å‹ç¼–å†™

**Codex ç¼–å†™ (åç«¯/é€»è¾‘ç« èŠ‚)**:

```bash
~/.claude/bin/codeagent-wrapper codex \
  --role writer \
  --workdir $PROJECT_DIR \
  --prompt "åŸºäºä»¥ä¸‹å¤§çº²å’Œç´ æï¼Œç¼–å†™åç«¯ç›¸å…³ç« èŠ‚:

å¤§çº²:
<outline.md å†…å®¹>

ç´ æåº“:
<materials.md å†…å®¹>

è¦æ±‚:
1. æ¯ä¸ªæ­¥éª¤å¿…é¡»å…·ä½“å¯æ‰§è¡Œ
2. åŒ…å«: å…·ä½“æ“ä½œã€é¢„æœŸè¾“å‡ºã€éªŒè¯æ–¹æ³•ã€å®Œæˆæ¡ä»¶
3. å¼•ç”¨ç´ æåº“ä¸­çš„å®é™…ä»£ç å’Œæ¥å£
4. ä¸è¦è™šæ„ä¸å­˜åœ¨çš„ä»£ç æˆ– API

OUTPUT FORMAT (chapter-N.md):
# ç« èŠ‚ N: <ç« èŠ‚å>

## æ­¥éª¤ N.1: <æ­¥éª¤å>
- æ–‡ä»¶: <å…·ä½“æ–‡ä»¶è·¯å¾„>
- æ“ä½œ: <å…·ä½“æ“ä½œ>
- ä»£ç :
  \`\`\`typescript
  // å…·ä½“ä»£ç ç¤ºä¾‹
  \`\`\`
- é¢„æœŸè¾“å‡º: <æè¿°>
- éªŒè¯æ–¹æ³•: <å¦‚ä½•éªŒè¯>
- å®Œæˆæ¡ä»¶: <æ¡ä»¶>
"
```

**Gemini ç¼–å†™ (å‰ç«¯/UI ç« èŠ‚)**:

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role writer \
  --workdir $PROJECT_DIR \
  --prompt "åŸºäºä»¥ä¸‹å¤§çº²å’Œç´ æï¼Œç¼–å†™å‰ç«¯ç›¸å…³ç« èŠ‚:
  ...ï¼ˆç±»ä¼¼æ ¼å¼ï¼‰"
```

### Step 4: é‡æ„å’Œæ•´åˆ

Claude å¯¹å¤–éƒ¨æ¨¡å‹è¾“å‡ºè¿›è¡Œé‡æ„ï¼š

1. **äº‹å®æ ¸æŸ¥** - éªŒè¯å¼•ç”¨çš„ä»£ç /API ç¡®å®å­˜åœ¨
2. **é£æ ¼ç»Ÿä¸€** - ç¡®ä¿ç« èŠ‚æ ¼å¼ä¸€è‡´
3. **å»å†—ä½™** - åˆ é™¤é‡å¤å†…å®¹
4. **è¡¥å……ç»†èŠ‚** - å®Œå–„ä¸å¤Ÿå…·ä½“çš„æ­¥éª¤

### Step 5: è¾“å‡ºç« èŠ‚

å°†ç»“æœå†™å…¥ `${run_dir}/chapter-*.md`ï¼š

````markdown
# ç« èŠ‚ 1: æ•°æ®æ¨¡å‹è®¾è®¡

## å…ƒä¿¡æ¯

- ç±»å‹: backend
- ç¼–å†™æ¨¡å‹: Codex + Claude é‡æ„
- ç¼–å†™æ—¶é—´: [timestamp]

## æ­¥éª¤ 1.1: åˆ›å»º Comment æ¨¡å‹

- **æ–‡ä»¶**: `src/models/comment.ts`
- **æ“ä½œ**: å®šä¹‰ Comment æ¥å£å’Œ Prisma schema
- **ä»£ç **:
  ```typescript
  // src/models/comment.ts
  export interface Comment {
    id: string;
    postId: string;
    author: string;
    content: string;
    createdAt: Date;
  }
  ```
````

- **é¢„æœŸè¾“å‡º**: TypeScript ç¼–è¯‘é€šè¿‡
- **éªŒè¯æ–¹æ³•**: `npx tsc --noEmit`
- **å®Œæˆæ¡ä»¶**: æ¨¡å‹åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ

## æ­¥éª¤ 1.2: æ›´æ–° Prisma Schema

- **æ–‡ä»¶**: `prisma/schema.prisma`
- **æ“ä½œ**: æ·»åŠ  Comment æ¨¡å‹å®šä¹‰
- **ä»£ç **:
  ```prisma
  model Comment {
    id        String   @id @default(uuid())
    postId    String
    post      Post     @relation(fields: [postId], references: [id])
    author    String
    content   String
    createdAt DateTime @default(now())
  }
  ```
- **é¢„æœŸè¾“å‡º**: Prisma éªŒè¯é€šè¿‡
- **éªŒè¯æ–¹æ³•**: `npx prisma validate`
- **å®Œæˆæ¡ä»¶**: Schema æ— é”™è¯¯

---

ä¸‹ä¸€æ­¥: ç»§ç»­ä¸‹ä¸€ç« èŠ‚æˆ–è°ƒç”¨ document-reviewer å®¡æŸ¥

```

## è¿”å›å€¼

æ‰§è¡Œå®Œæˆåï¼Œè¿”å›ï¼š

```

ç« èŠ‚ç¼–å†™å®Œæˆã€‚
è¾“å‡ºæ–‡ä»¶: ${run_dir}/chapter-\*.md

ğŸ“ ç¼–å†™æ¦‚è¦:

- æ€»ç« èŠ‚æ•°: X
- æ€»æ­¥éª¤æ•°: Y
- åç«¯æ­¥éª¤: Z
- å‰ç«¯æ­¥éª¤: W

ä¸‹ä¸€æ­¥: ä½¿ç”¨ /planning:document-reviewer å®¡æŸ¥æ–‡æ¡£

```

## è´¨é‡é—¨æ§ (Gate 3)

| ç»´åº¦ | æ ‡å‡† | é˜ˆå€¼ |
|------|------|------|
| æ¯ç« è¯„åˆ† | æ¯ä¸ªç« èŠ‚ç‹¬ç«‹è¯„åˆ† | â‰¥4/5 |
| å­—æ•°æ§åˆ¶ | æ˜¯å¦åœ¨è§„åˆ’å­—æ•°èŒƒå›´å†… | OK |
| æ— è™šæ„ | æ˜¯å¦å­˜åœ¨è™šæ„çš„ä»£ç /API | æ—  |
| å¯æ“ä½œæ€§ | æ­¥éª¤æ˜¯å¦è¶³å¤Ÿå…·ä½“ | â‰¥4/5 |
| å¯éªŒè¯æ€§ | å®Œæˆæ¡ä»¶æ˜¯å¦æ˜ç¡® | â‰¥4/5 |

- å…¨éƒ¨é€šè¿‡: ç»§ç»­ä¸‹ä¸€é˜¶æ®µ
- ä»»ä¸€ä¸é€šè¿‡: è¿­ä»£æ”¹è¿›å¯¹åº”ç« èŠ‚
- è¿­ä»£ > 3: è§¦å‘æ–­è·¯å™¨

## çº¦æŸ

- ä¸åšç´ æç ”ç©¶ï¼ˆäº¤ç»™ context-researcherï¼‰
- ä¸åšæ–‡æ¡£å®¡æŸ¥ï¼ˆäº¤ç»™ document-reviewerï¼‰
- å¿…é¡»å¼•ç”¨ materials.md ä¸­çš„å®é™…ä»£ç 
- ä¸èƒ½è™šæ„ä¸å­˜åœ¨çš„ API æˆ–åŠŸèƒ½
- å¤–éƒ¨æ¨¡å‹è¾“å‡ºå¿…é¡»ç» Claude é‡æ„
```
