---
name: article-polisher
description: |
  【触发条件】写作工作流第四步：润色草稿，输出定稿。
  【输入】${RUN_DIR}/draft-*.md（一个或多个草稿）
  【输出】${RUN_DIR}/final.md
  【不触发】草稿尚未生成，或用户选择跳过润色直接发布。
allowed-tools: ["Read", "Write"]
---

# Article Polisher - 润色定稿技能

## 职责

对草稿进行润色打磨，修正语言错误，优化表达，确保逻辑流畅，输出可发布的最终版本。

## 输入输出契约

### 输入

- **必需**: `${RUN_DIR}/draft-*.md`（一个或多个草稿文件）
- **可选参数**:
  - `source_draft`: 指定哪个草稿作为基础（默认选择 word_count 最接近预期的）
  - `merge_strategy`: 多草稿合并策略（best_of_each | single_source）

### 输出

- **路径**: `${RUN_DIR}/final.md`
- **格式**: 完整的 Markdown 文章，包含 frontmatter

### 产物 Frontmatter 模板

```yaml
---
step: article-polisher
inputs: ["draft-1.md", "draft-2.md", "draft-3.md"]
source_draft: "draft-2.md"
created_at: 2026-01-14T10:35:00Z
topic: "文章主题"
word_count: 2050
polish_actions:
  - "grammar_fix"
  - "coherence_improve"
  - "redundancy_remove"
---
```

## 润色维度

### 1. 语言修正

- **拼写错误**: 修正错别字
- **语法错误**: 修正句法问题（主谓一致、时态等）
- **标点符号**: 统一中英文标点规范
- **术语规范**: 确保专业术语准确

### 2. 表达优化

- **冗余删减**: 删除重复表述
- **简洁度**: 长句拆分，复杂表达简化
- **准确性**: 模糊表述改为具体描述
- **一致性**: 统一叙述人称、时态、语气

### 3. 逻辑优化

- **段落重组**: 调整段落顺序，增强逻辑性
- **过渡完善**: 添加/优化章节、段落间的过渡
- **论证加强**: 补充数据、案例支撑薄弱论点
- **结构平衡**: 调整章节长度，避免失衡

### 4. 可读性提升

- **段落长度**: 过长段落拆分（建议 100-150 字/段）
- **列表化**: 并列内容改为列表
- **小标题**: 为长章节添加小标题
- **重点标记**: 使用**粗体**、*斜体*强调关键点

## 执行流程

1. **读取所有草稿**

   ```
   Read ${RUN_DIR}/draft-1.md
   Read ${RUN_DIR}/draft-2.md
   Read ${RUN_DIR}/draft-3.md
   ```

2. **选择基础草稿**
   - 如指定 `source_draft`，使用指定草稿
   - 否则，根据以下标准选择：
     - 字数最接近预期（estimated_words）
     - frontmatter 中 `quality` 不为 `draft`
     - 无 `warning` 标记

3. **多草稿对比（可选）**
   如采用 `best_of_each` 策略：
   - 对比各草稿的章节质量
   - 选择每个章节的最佳版本
   - 合并为新草稿

4. **逐维度润色**
   按顺序执行：
   1. 语言修正（拼写、语法、标点）
   2. 冗余删减
   3. 表达优化
   4. 逻辑重组
   5. 可读性提升

5. **质量检查**
   - 字数是否合理（不应增减超过 10%）
   - 是否引入新错误
   - 原意是否保留

6. **生成 final.md**

   ```yaml
   ---
   step: article-polisher
   inputs: ["draft-1.md", "draft-2.md"]
   source_draft: "draft-2.md"
   created_at: <timestamp>
   topic: "<主题>"
   word_count: <最终字数>
   polish_actions: [<修改动作列表>]
   ---
   <润色后的完整文章>
   ```

7. **写入产物**
   ```
   Write ${RUN_DIR}/final.md <content>
   ```

## 质量标准

### 必须满足

- ✅ 产物文件包含有效的 YAML frontmatter
- ✅ 无明显语言错误（拼写、语法、标点）
- ✅ 逻辑流畅（有效的过渡）
- ✅ 字数变化 ≤ 10%
- ✅ 原草稿的核心论点和案例保留

### 应该满足

- 段落长度适中（100-150 字）
- 重要观点有强调标记
- 并列内容用列表展示
- 专业术语有必要解释

### 不应出现

- ❌ 引入新的事实性错误
- ❌ 改变作者原意
- ❌ 过度润色导致风格变化
- ❌ 删除关键数据或案例

## 润色原则

### Do（应该做）

- ✅ 修正明显错误
- ✅ 删除冗余表述
- ✅ 优化句式结构
- ✅ 完善逻辑衔接
- ✅ 提升可读性

### Don't（不应该做）

- ❌ 不要添加原草稿没有的新论点
- ❌ 不要删除关键数据或案例
- ❌ 不要改变整体风格（如将科普风改成学术风）
- ❌ 不要过度简化专业内容（除非明显晦涩）
- ❌ 不要添加夸张表述（"极其"、"非常"等）

## 失败处理

### 草稿缺失

- **症状**: 找不到任何 draft-\*.md 文件
- **处理**: 返回错误，提示先运行 writer

### 草稿质量过低

- **症状**: 所有草稿都标记 `quality: draft` 或有严重 `warning`
- **处理**: 在 final.md frontmatter 标记 `quality: needs_review`，建议人工审查

### 多草稿无法合并

- **症状**: 采用 `best_of_each` 但各章节差异过大
- **处理**: 回退到 `single_source` 策略，选择最佳单一草稿

## 示例

### 输入 (draft-2.md 片段 - 润色前)

```markdown
## 2. AI 医疗诊断的主要技术

AI 在医疗领域的应用非常非常广泛，但最成熟的还是影像诊断，影像诊断是最成熟的。
就像我们用美图秀秀自动识别人脸一样，AI 也能"看懂"CT 片、X 光片里的病变。

以肺结节检测为例，肺结节是肺癌的早期信号，但在 CT 片上它可能只有几毫米大小，
人眼很容易漏掉，AI 的优势在于：它能在几秒钟内扫描整张片子的每个角落，把所有
可疑的小白点都用红圈标出来，根据 2019 年《自然·医学》杂志的研究，AI 在肺结节
检测上的准确率已经超过 90%，甚至在某些细分任务上超过了人类医生。
```

### 输出 (final.md 片段 - 润色后)

```markdown
## 2. AI 医疗诊断的主要技术

AI 在医疗领域的应用十分广泛，但**最成熟的仍是影像诊断**。就像我们用美图秀秀
自动识别人脸一样，AI 也能"看懂"CT 片、X 光片里的病变。

### 2.1 影像识别技术

以肺结节检测为例：

- **挑战**: 肺结节是肺癌的早期信号，但在 CT 片上它可能只有几毫米大小，人眼很容易漏掉
- **AI 优势**: 在几秒钟内扫描整张片子的每个角落，标记所有可疑区域
- **准确率**: 根据 2019 年《自然·医学》杂志的研究，AI 在肺结节检测上的准确率超过 **90%**，
  某些细分任务甚至超越人类医生

【润色动作】:

- 删除冗余："非常非常广泛" → "十分广泛"，删除重复句
- 拆分长句：120 字长句拆为 3 个小点
- 列表化：将并列内容改为列表
- 强调重点：用粗体标记关键数据
```

## 注意事项

1. **保持克制**: 润色不是重写，只改进表达，不改变内容
2. **记录修改**: 在 frontmatter 的 `polish_actions` 中记录主要修改类型
3. **多草稿策略**: 默认选最佳单一草稿，只有明确指示才合并多个草稿
4. **风格一致**: 保持原草稿的叙述风格（技术/科普/故事化）

## 参考资源

- `references/polish-checklist.md` - 润色检查清单
- `references/common-errors.md` - 常见语言错误
- `references/style-consistency.md` - 风格一致性指南
