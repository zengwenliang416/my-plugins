# 工作流模式

## 顺序工作流

适用于复杂任务，分解为清晰的步骤序列。在 SKILL.md 开头给出概览：

```markdown
PDF 表单填写流程：

1. 分析表单结构（运行 analyze_form.py）
2. 创建字段映射（编辑 fields.json）
3. 验证映射关系（运行 validate_fields.py）
4. 填写表单（运行 fill_form.py）
5. 验证输出（运行 verify_output.py）
```

**关键点**：

- 每步明确输入/输出
- 标注需要运行的脚本
- 说明验证方法

## 条件工作流

适用于有分支逻辑的任务，引导 Claude 通过决策点：

```markdown
## 决策入口

1. 确定修改类型：
   **创建新内容？** → 跳转"创建流程"
   **编辑已有内容？** → 跳转"编辑流程"

## 创建流程

1. ...
2. ...

## 编辑流程

1. ...
2. ...
```

## 决策树模式

适用于需要快速判断的场景（参考 webapp-testing）：

```markdown
## 决策树

用户任务 → 是静态 HTML？
├─ 是 → 直接读取 HTML 识别选择器
│ ├─ 成功 → 编写 Playwright 脚本
│ └─ 失败 → 按动态处理
│
└─ 否（动态应用） → 服务是否已启动？
├─ 否 → 运行 scripts/with_server.py --help
└─ 是 → 侦察-行动模式：1. 导航并等待 networkidle 2. 截图或检查 DOM 3. 从渲染状态识别选择器 4. 使用发现的选择器执行操作
```

## 迭代工作流

适用于需要反复调整的任务：

```markdown
## 迭代流程

1. 初始实现
2. 运行验证（测试/预览）
3. 根据结果调整
4. 重复 2-3 直到满足要求

**退出条件**：

- 所有测试通过
- 用户确认满意
- 达到最大迭代次数（建议 3 次）
```

## 并行工作流

适用于可以同时进行的独立任务：

```markdown
## 并行任务

以下任务可同时进行：

**任务 A**：分析代码结构
**任务 B**：收集测试用例
**任务 C**：检查依赖关系

全部完成后 → 汇总分析结果
```
