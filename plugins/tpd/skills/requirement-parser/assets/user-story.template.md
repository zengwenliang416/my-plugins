# 用户故事模板

## 标准格式

```
作为 [角色]，
我希望 [功能/能力]，
以便 [价值/目的]。
```

## 示例

### 基础示例

```
作为 注册用户，
我希望 能够使用邮箱和密码登录系统，
以便 访问我的个人账户。
```

### 带验收标准的完整示例

```markdown
### US-001: 用户登录

**用户故事**:
作为 注册用户，
我希望 能够使用邮箱和密码登录系统，
以便 访问我的个人账户。

**验收标准**:
Given 我是注册用户
When 我输入正确的邮箱和密码
Then 我应该被重定向到首页
And 我应该看到欢迎消息

Given 我是注册用户
When 我输入错误的密码
Then 我应该看到"密码错误"提示
And 我应该仍停留在登录页面

**优先级**: P1

**预估**: 3 Story Points
```

## INVEST 原则检查

| 原则            | 说明   | 检查问题               |
| --------------- | ------ | ---------------------- |
| **I**ndependent | 独立   | 这个故事能独立交付吗？ |
| **N**egotiable  | 可协商 | 实现方式可以讨论吗？   |
| **V**aluable    | 有价值 | 对用户/业务有价值吗？  |
| **E**stimable   | 可估算 | 能估算工作量吗？       |
| **S**mall       | 小     | 能在一个迭代内完成吗？ |
| **T**estable    | 可测试 | 能写测试用例吗？       |

## 常见角色

| 角色       | 描述            | 典型需求           |
| ---------- | --------------- | ------------------ |
| 访客       | 未登录用户      | 查看公开内容、注册 |
| 注册用户   | 已注册并登录    | 使用核心功能       |
| 管理员     | 系统管理者      | 用户管理、配置     |
| API 消费者 | 外部系统/开发者 | 调用 API 接口      |

## 验收标准格式

### Gherkin 格式（推荐）

```gherkin
Feature: 用户登录

  Scenario: 成功登录
    Given 我是注册用户
    And 我在登录页面
    When 我输入正确的邮箱 "user@example.com"
    And 我输入正确的密码
    And 我点击登录按钮
    Then 我应该被重定向到首页
    And 我应该看到我的用户名

  Scenario: 密码错误
    Given 我是注册用户
    When 我输入正确的邮箱
    But 我输入错误的密码
    Then 我应该看到错误提示 "密码错误"
    And 我应该仍在登录页面
```

### 简洁格式

```markdown
**验收标准**:

- [ ] 输入正确凭据，登录成功并跳转首页
- [ ] 输入错误密码，显示错误提示，停留在登录页
- [ ] 邮箱格式错误，显示格式提示
- [ ] 5次登录失败后，账户锁定15分钟
```

## 拆分用户故事

### 按工作流拆分

原始故事：

```
作为用户，我希望能完成购物流程。
```

拆分后：

```
1. 作为用户，我希望能将商品加入购物车。
2. 作为用户，我希望能修改购物车中的商品数量。
3. 作为用户，我希望能填写收货地址。
4. 作为用户，我希望能选择支付方式。
5. 作为用户，我希望能完成支付。
```

### 按用户角色拆分

原始故事：

```
作为用户，我希望能管理账户。
```

拆分后：

```
1. 作为普通用户，我希望能修改个人信息。
2. 作为高级用户，我希望能设置两步验证。
3. 作为管理员，我希望能查看所有用户。
```

### 按数据变化拆分

原始故事：

```
作为用户，我希望能搜索商品。
```

拆分后：

```
1. 作为用户，我希望能按关键词搜索商品。
2. 作为用户，我希望能按分类筛选商品。
3. 作为用户，我希望能按价格排序商品。
```
