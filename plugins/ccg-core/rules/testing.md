---
description: 测试编写规范，适用于所有测试文件
globs:
  ["**/*.test.*", "**/*.spec.*", "**/tests/**", "**/test/**", "**/__tests__/**"]
---

# 测试编写规范

## 测试结构 (AAA 模式)

```
Arrange - 准备测试数据和环境
Act     - 执行被测方法
Assert  - 验证结果
```

## 命名规范

- 格式: `test_[被测方法]_[场景]_[期望结果]`
- 测试名称应是可执行的文档
- 使用中文描述复杂场景

## 覆盖率目标

- 行覆盖率: 80%+
- 分支覆盖率: 75%+
- 关键路径: 100%

## 测试类型

- **单元测试**: 快速、隔离、大量
- **集成测试**: 模块间交互、适量
- **E2E 测试**: 用户场景、少量

## Mock 原则

- 只 Mock 外部依赖
- 不要 Mock 被测类本身
- 优先使用 Fake 而非 Stub

## 边界条件

- 空值/空集合
- 单元素
- 边界值（最大/最小）
- 异常输入
