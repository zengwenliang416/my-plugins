---
name: gemini-planner
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘plan å·¥ä½œæµä¸­éœ€è¦å‰ç«¯æ¶æ„è§„åˆ’ã€ç»„ä»¶è®¾è®¡ã€UI/UX ç­–ç•¥ã€è®¾è®¡ç³»ç»Ÿåˆ†ææ—¶ä½¿ç”¨
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡ºå‰ç«¯è§„åˆ’æ–‡æ¡£ï¼ˆConductor æ ¼å¼ï¼‰ï¼ŒåŒ…å«ç»„ä»¶å±‚çº§ã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±è®¾è®¡
  ã€å¼ºåˆ¶æ¨¡å¼ã€‘åªè¯»æ¨¡å¼ï¼Œç¦æ­¢ç”Ÿæˆå®é™…ä»£ç 
  ã€ä¸è§¦å‘ã€‘åç«¯ API/æ•°æ®åº“è§„åˆ’ï¼ˆç”¨ codex-plannerï¼‰ã€ç®€å•ä»»åŠ¡
allowed-tools:
  - Bash
  - Read
  - Task
  - mcp__sequential-thinking__sequentialthinking
arguments:
  - name: run_dir
    type: string
    required: true
    description: è§„åˆ’è¿è¡Œç›®å½•è·¯å¾„
  - name: focus
    type: string
    required: false
    description: è§„åˆ’ç„¦ç‚¹ï¼ˆcomponents|state|routing|design-system|responsiveï¼‰
---

# Gemini Planner - å¤šæ¨¡å‹åä½œå‰ç«¯è§„åˆ’ä¸“å®¶

Frontend architecture planning via `codeagent-wrapper` in **plan mode**. Read-only analysis â†’ Conductor format â†’ Claude synthesis.

## æ ¸å¿ƒç†å¿µ

åŸºäº [Gemini CLI Conductor](https://developers.googleblog.com/conductor-introducing-context-driven-development-for-gemini-cli/) æ–¹æ³•è®ºï¼š

- **Context-Driven Development**: ä¸Šä¸‹æ–‡é©±åŠ¨çš„è§„åˆ’
- **Formal Specs**: æ­£å¼è§„æ ¼æ–‡æ¡£ï¼ŒæŒä¹…åŒ–åœ¨ Markdown ä¸­
- **Human in the Loop**: äººç±»å¼€å‘è€…å§‹ç»ˆæŒæ§å†³ç­–

## MCP å·¥å…·é›†æˆ

| MCP å·¥å…·              | ç”¨é€”                                           | è§¦å‘æ¡ä»¶        |
| --------------------- | ---------------------------------------------- | --------------- |
| `sequential-thinking` | ç»“æ„åŒ–å‰ç«¯æ¶æ„è§„åˆ’ï¼Œç¡®ä¿ç»„ä»¶/çŠ¶æ€/è·¯ç”±è®¾è®¡å®Œæ•´ | ğŸš¨ æ¯æ¬¡æ‰§è¡Œå¿…ç”¨ |

### é¢„è§„åˆ’æ€è€ƒï¼ˆsequential-thinkingï¼‰

ğŸš¨ **å¿…é¡»é¦–å…ˆä½¿ç”¨ sequential-thinking è§„åˆ’åˆ†æç­–ç•¥**

```
mcp__sequential-thinking__sequentialthinking({
  thought: "è§„åˆ’å‰ç«¯æ¶æ„åˆ†æã€‚éœ€è¦ï¼š1) ç”¨æˆ·æ—…ç¨‹åˆ†æ 2) è®¾è®¡ç³»ç»Ÿæ£€æŸ¥ 3) ç»„ä»¶æ¶æ„è®¾è®¡ 4) çŠ¶æ€ç®¡ç†è§„åˆ’ 5) è·¯ç”±è®¾è®¡",
  thoughtNumber: 1,
  totalThoughts: 6,
  nextThoughtNeeded: true
})
```

**æ€è€ƒæ­¥éª¤**ï¼š

1. **ç”¨æˆ·æ—…ç¨‹åˆ†æ**ï¼šäº¤äº’æµç¨‹ã€UI/UX çº¦æŸ
2. **è®¾è®¡ç³»ç»Ÿæ£€æŸ¥**ï¼šç°æœ‰ç»„ä»¶ã€è®¾è®¡ Tokenã€é£æ ¼æŒ‡å—
3. **ç»„ä»¶æ¶æ„è®¾è®¡**ï¼šAtomic Design å±‚çº§ã€ç»„ä»¶äº¤äº’å›¾
4. **çŠ¶æ€ç®¡ç†è§„åˆ’**ï¼šServer State / Client State / URL State
5. **è·¯ç”±è®¾è®¡**ï¼šè·¯ç”±å±‚çº§ã€å¯¼èˆªæµç¨‹ã€ä»£ç åˆ†å‰²
6. **å“åº”å¼ç­–ç•¥**ï¼šæ–­ç‚¹ã€å¸ƒå±€é€‚é…ã€æ— éšœç¢

## æ‰§è¡Œå‘½ä»¤

```bash
# è§„åˆ’æ¨¡å¼è°ƒç”¨ï¼ˆåªè¯»ï¼‰
~/.claude/bin/codeagent-wrapper gemini \
  --workdir "$PROJECT_DIR" \
  --role planner \
  --prompt "$PLANNING_PROMPT"
```

## ğŸš¨ğŸš¨ğŸš¨ å¼ºåˆ¶è§„åˆ’æµç¨‹ ğŸš¨ğŸš¨ğŸš¨

### Step 1: éœ€æ±‚ç†è§£ä¸ç”¨æˆ·æ—…ç¨‹

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role planner \
  --prompt "
éœ€æ±‚ï¼š$REQUIREMENT

è¯·ä½œä¸ºé«˜çº§å‰ç«¯æ¶æ„å¸ˆåˆ†æï¼š
1. ç”¨æˆ·æ—…ç¨‹å’Œäº¤äº’æµç¨‹
2. æ ¸å¿ƒé¡µé¢å’Œç»„ä»¶éœ€æ±‚
3. UI/UX çº¦æŸå’ŒæœŸæœ›
4. å“åº”å¼å’Œæ— éšœç¢éœ€æ±‚

è¾“å‡ºæ ¼å¼ï¼šConductor SPEC.md ç¬¬ä¸€ç« èŠ‚
"
```

### Step 2: è®¾è®¡ç³»ç»Ÿåˆ†æ

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role analyzer \
  --prompt "
åˆ†æç°æœ‰è®¾è®¡ç³»ç»Ÿå’Œç»„ä»¶åº“ï¼š
1. å¯å¤ç”¨çš„ç°æœ‰ç»„ä»¶
2. è®¾è®¡ Tokenï¼ˆé¢œè‰²ã€å­—ä½“ã€é—´è·ï¼‰
3. ç»„ä»¶åº“é€‰å‹ï¼ˆå¦‚æœ‰ï¼‰
4. é£æ ¼ä¸€è‡´æ€§æ£€æŸ¥

è¾“å‡ºï¼šè®¾è®¡ç³»ç»Ÿä¸Šä¸‹æ–‡æ‘˜è¦
" \
  --session "$SESSION_ID"
```

### Step 3: ç»„ä»¶æ¶æ„è®¾è®¡

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role architect \
  --prompt "
åŸºäºåˆ†æç»“æœï¼Œè®¾è®¡ç»„ä»¶æ¶æ„ï¼š

## ç»„ä»¶å±‚çº§ï¼ˆAtomic Designï¼‰
### Atomsï¼ˆåŸå­ç»„ä»¶ï¼‰
### Moleculesï¼ˆåˆ†å­ç»„ä»¶ï¼‰
### Organismsï¼ˆæœ‰æœºä½“ç»„ä»¶ï¼‰
### Templatesï¼ˆæ¨¡æ¿ï¼‰
### Pagesï¼ˆé¡µé¢ï¼‰

## ç»„ä»¶äº¤äº’å›¾
- çˆ¶å­å…³ç³»
- äº‹ä»¶æµå‘
- çŠ¶æ€å…±äº«

## å¤ç”¨ç­–ç•¥
- ç°æœ‰ç»„ä»¶å¤ç”¨
- æ–°å»ºç»„ä»¶åˆ—è¡¨
- æŠ½è±¡å±‚æ¬¡å»ºè®®
" \
  --session "$SESSION_ID"
```

### Step 4: çŠ¶æ€ç®¡ç†è§„åˆ’

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role architect \
  --prompt "
è®¾è®¡çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

### Server State
- æ•°æ®è·å–ç­–ç•¥ï¼ˆReact Query / SWRï¼‰
- ç¼“å­˜ç­–ç•¥
- ä¹è§‚æ›´æ–°

### Client State
- å…¨å±€çŠ¶æ€ï¼ˆContext / Zustand / Reduxï¼‰
- æœ¬åœ°çŠ¶æ€
- URL çŠ¶æ€ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰

### çŠ¶æ€æµå›¾
- æ•°æ®æº
- çŠ¶æ€å˜æ›´
- å‰¯ä½œç”¨å¤„ç†
" \
  --session "$SESSION_ID"
```

### Step 5: è·¯ç”±ä¸å¯¼èˆªè®¾è®¡

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role architect \
  --prompt "
è®¾è®¡è·¯ç”±å’Œå¯¼èˆªç»“æ„ï¼š

### è·¯ç”±å±‚çº§
- å…¬å…±è·¯ç”±
- å—ä¿æŠ¤è·¯ç”±
- åµŒå¥—å¸ƒå±€

### å¯¼èˆªæµç¨‹
- ä¸»å¯¼èˆª
- é¢åŒ…å±‘
- æ·±é“¾æ¥æ”¯æŒ

### ä»£ç åˆ†å‰²
- è·¯ç”±çº§æ‡’åŠ è½½
- é¢„åŠ è½½ç­–ç•¥

### è·¯ç”±å®ˆå«
- è®¤è¯æ£€æŸ¥
- æƒé™éªŒè¯
- é‡å®šå‘é€»è¾‘
" \
  --session "$SESSION_ID"
```

### Step 6: å“åº”å¼ä¸æ— éšœç¢ç­–ç•¥

```bash
~/.claude/bin/codeagent-wrapper gemini \
  --role planner \
  --prompt "
è®¾è®¡å“åº”å¼å’Œæ— éšœç¢ç­–ç•¥ï¼š

### å“åº”å¼æ–­ç‚¹
- ç§»åŠ¨ç«¯ (<768px)
- å¹³æ¿ (768-1024px)
- æ¡Œé¢ (>1024px)

### å¸ƒå±€é€‚é…
- å¼¹æ€§å¸ƒå±€ç­–ç•¥
- ç»„ä»¶å“åº”å¼è¡Œä¸º

### æ— éšœç¢ (a11y)
- WCAG çº§åˆ«ç›®æ ‡
- é”®ç›˜å¯¼èˆª
- å±å¹•é˜…è¯»å™¨æ”¯æŒ
- é¢œè‰²å¯¹æ¯”åº¦

### æ€§èƒ½é¢„ç®—
- é¦–å±åŠ è½½ç›®æ ‡
- äº¤äº’å“åº”ç›®æ ‡
" \
  --session "$SESSION_ID"
```

## è§’è‰²æç¤ºè¯

| è§’è‰²      | ç”¨é€”              | å‘½ä»¤ç¤ºä¾‹           |
| --------- | ----------------- | ------------------ |
| planner   | éœ€æ±‚åˆ†æã€UX è§„åˆ’ | `--role planner`   |
| analyzer  | è®¾è®¡ç³»ç»Ÿåˆ†æ      | `--role analyzer`  |
| architect | ç»„ä»¶/çŠ¶æ€æ¶æ„è®¾è®¡ | `--role architect` |
| designer  | UI ç»†èŠ‚è®¾è®¡       | `--role designer`  |
| reviewer  | æ–¹æ¡ˆå®¡æŸ¥          | `--role reviewer`  |

## Conductor SPEC.md è¾“å‡ºæ ¼å¼

```markdown
# [åŠŸèƒ½åç§°] å‰ç«¯è§„åˆ’

## å…ƒä¿¡æ¯

- è§„åˆ’ ID: ${run_id}
- åˆ›å»ºæ—¶é—´: ${timestamp}
- è§„åˆ’è€…: Gemini + Claude

## 1. éœ€æ±‚ç†è§£

### 1.1 ç”¨æˆ·æ—…ç¨‹

### 1.2 äº¤äº’æµç¨‹

### 1.3 UI/UX çº¦æŸ

## 2. è®¾è®¡ç³»ç»Ÿä¸Šä¸‹æ–‡

### 2.1 ç°æœ‰ç»„ä»¶

### 2.2 è®¾è®¡ Token

### 2.3 é£æ ¼æŒ‡å—

## 3. ç»„ä»¶æ¶æ„

### 3.1 ç»„ä»¶å±‚çº§ï¼ˆAtomic Designï¼‰

### 3.2 ç»„ä»¶äº¤äº’å›¾

### 3.3 å¤ç”¨ç­–ç•¥

## 4. çŠ¶æ€ç®¡ç†

### 4.1 Server State

### 4.2 Client State

### 4.3 çŠ¶æ€æµå›¾

## 5. è·¯ç”±è®¾è®¡

### 5.1 è·¯ç”±å±‚çº§

### 5.2 å¯¼èˆªæµç¨‹

### 5.3 ä»£ç åˆ†å‰²ç­–ç•¥

## 6. å“åº”å¼ä¸æ— éšœç¢

### 6.1 æ–­ç‚¹ç­–ç•¥

### 6.2 å¸ƒå±€é€‚é…

### 6.3 æ— éšœç¢æ¸…å•

## 7. å®æ–½è·¯å¾„

### 7.1 ç»„ä»¶å¼€å‘é¡ºåº

### 7.2 ä¾èµ–å…³ç³»

### 7.3 é‡Œç¨‹ç¢‘

## 8. éªŒæ”¶æ ‡å‡†

### 8.1 åŠŸèƒ½éªŒæ”¶

### 8.2 è§†è§‰éªŒæ”¶

### 8.3 æ€§èƒ½éªŒæ”¶
```

## ä¸Šä¸‹æ–‡ç®¡ç† (32k é™åˆ¶)

| ç­–ç•¥            | æ–¹æ³•                        |
| --------------- | --------------------------- |
| Atomic Design   | ä¸€æ¬¡ä¸€ä¸ªç»„ä»¶å±‚çº§            |
| Interface First | åªä¼ ç»„ä»¶æ¥å£ï¼Œä¸ä¼ å®ç°      |
| Multi-turn      | ç»„ä»¶ â†’ çŠ¶æ€ â†’ è·¯ç”± åˆ†æ­¥è§„åˆ’ |
| Session Reuse   | ä½¿ç”¨ `--session` ä¿æŒä¸Šä¸‹æ–‡ |

## ä¼šè¯ç®¡ç†

```bash
# ä¿å­˜ SESSION_ID ç”¨äºå¤šæ­¥è§„åˆ’
result=$(~/.claude/bin/codeagent-wrapper gemini --role planner --prompt "...")
SESSION_ID=$(echo "$result" | grep SESSION_ID | cut -d= -f2)

# åç»­æ­¥éª¤ç»§ç»­ä¼šè¯
~/.claude/bin/codeagent-wrapper gemini --prompt "..." --session "$SESSION_ID"
```

## å¼ºåˆ¶çº¦æŸ

| å¿…é¡»æ‰§è¡Œ                 | ç¦æ­¢äº‹é¡¹            |
| ------------------------ | ------------------- |
| âœ… ä½¿ç”¨ `--role planner` | âŒ ç”Ÿæˆå¯æ‰§è¡Œä»£ç    |
| âœ… è¾“å‡º SPEC.md æ ¼å¼     | âŒ è·³è¿‡è®¾è®¡ç³»ç»Ÿåˆ†æ |
| âœ… è€ƒè™‘å“åº”å¼å’Œæ— éšœç¢    | âŒ åªè€ƒè™‘æ¡Œé¢ç«¯     |
| âœ… ç»„ä»¶å±‚çº§æ¸…æ™°          | âŒ æ‰å¹³ç»„ä»¶ç»“æ„     |
| âœ… ä¿å­˜ SESSION_ID       | âŒ ä¸¢å¤±è§„åˆ’ä¸Šä¸‹æ–‡   |
| âœ… éµå®ˆ 32k ä¸Šä¸‹æ–‡é™åˆ¶   | âŒ ä¸€æ¬¡ä¼ å…¥è¿‡å¤šä¿¡æ¯ |

## è¾“å‡ºæ–‡ä»¶

æ‰§è¡Œå®Œæˆåï¼Œå°†ç»“æœå†™å…¥ï¼š

- `${run_dir}/gemini-plan.md` - Gemini è§„åˆ’è¾“å‡º
- å†…å®¹å°†è¢« architecture-analyzer æ•´åˆåˆ° `architecture.md`

## ä¸å…¶ä»– Skills çš„åä½œ

```
plan-context-retriever â†’ codex-planner (åç«¯) â”€â”
                                              â”œâ†’ architecture-analyzer â†’ task-decomposer
                       â†’ gemini-planner (å‰ç«¯) â”€â”˜
```

## ä¸ codex-planner çš„åˆ†å·¥

| ç»´åº¦     | codex-planner        | gemini-planner       |
| -------- | -------------------- | -------------------- |
| ç„¦ç‚¹     | åç«¯æ¶æ„ã€APIã€æ•°æ®  | å‰ç«¯æ¶æ„ã€ç»„ä»¶ã€çŠ¶æ€ |
| è¾“å‡ºæ ¼å¼ | PLANS.md             | SPEC.md (Conductor)  |
| æ·±åº¦æ¢ç´¢ | ä»£ç åº“ä¾èµ–ã€å®‰å…¨å®¡æŸ¥ | è®¾è®¡ç³»ç»Ÿã€UX æµç¨‹    |
| å…¸å‹åœºæ™¯ | è®¤è¯ã€æ•°æ®åº“ã€æ€§èƒ½   | UI ç»„ä»¶ã€è¡¨å•ã€è·¯ç”±  |

---

SESSION_ID=xxx
