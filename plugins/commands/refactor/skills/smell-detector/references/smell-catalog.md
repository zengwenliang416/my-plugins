# Code Smell Catalog - ä»£ç æ°”å‘³ç›®å½•

## é€šç”¨ä»£ç æ°”å‘³

### 1. Duplicated Codeï¼ˆé‡å¤ä»£ç ï¼‰

**æè¿°**: ç›¸åŒæˆ–ç›¸ä¼¼çš„ä»£ç å‡ºç°åœ¨å¤šå¤„

**æ£€æµ‹è§„åˆ™**:

- å®Œå…¨ç›¸åŒçš„ä»£ç å— â‰¥ 6 è¡Œ
- ç»“æ„ç›¸ä¼¼çš„ä»£ç å—ï¼ˆä»…å˜é‡åä¸åŒï¼‰â‰¥ 10 è¡Œ

**ä¸¥é‡ç¨‹åº¦**: Medium

**é‡æ„å»ºè®®**:

- Extract Methodï¼ˆæå–æ–¹æ³•ï¼‰
- Extract Classï¼ˆæå–ç±»ï¼‰
- Form Template Methodï¼ˆå½¢æˆæ¨¡æ¿æ–¹æ³•ï¼‰

---

### 2. Long Methodï¼ˆè¿‡é•¿æ–¹æ³•ï¼‰

**æè¿°**: æ–¹æ³•ä½“è¿‡é•¿ï¼Œéš¾ä»¥ç†è§£å’Œç»´æŠ¤

**æ£€æµ‹è§„åˆ™**:

- æ–¹æ³•ä½“ > 50 è¡Œ
- åœˆå¤æ‚åº¦ > 10
- å‚æ•°æ•°é‡ > 5

**ä¸¥é‡ç¨‹åº¦**: Medium

**é‡æ„å»ºè®®**:

- Extract Methodï¼ˆæå–æ–¹æ³•ï¼‰
- Decompose Conditionalï¼ˆåˆ†è§£æ¡ä»¶ï¼‰
- Replace Temp with Queryï¼ˆä»¥æŸ¥è¯¢å–ä»£ä¸´æ—¶å˜é‡ï¼‰

---

### 3. Large Class / God Classï¼ˆè¿‡å¤§ç±»/ä¸Šå¸ç±»ï¼‰

**æè¿°**: ç±»æ‰¿æ‹…è¿‡å¤šèŒè´£ï¼Œä»£ç é‡è¿‡å¤§

**æ£€æµ‹è§„åˆ™**:

- ç±»ä»£ç è¡Œæ•° > 500 è¡Œ
- æ–¹æ³•æ•°é‡ > 20 ä¸ª
- å­—æ®µæ•°é‡ > 15 ä¸ª
- LCOMï¼ˆå†…èšæ€§ç¼ºä¹åº¦ï¼‰> 0.8

**ä¸¥é‡ç¨‹åº¦**: High

**é‡æ„å»ºè®®**:

- Extract Classï¼ˆæå–ç±»ï¼‰
- Extract Subclassï¼ˆæå–å­ç±»ï¼‰
- Extract Interfaceï¼ˆæå–æ¥å£ï¼‰

---

### 4. Long Parameter Listï¼ˆè¿‡é•¿å‚æ•°åˆ—è¡¨ï¼‰

**æè¿°**: æ–¹æ³•å‚æ•°è¿‡å¤šï¼Œéš¾ä»¥è°ƒç”¨å’Œç†è§£

**æ£€æµ‹è§„åˆ™**:

- å‚æ•°æ•°é‡ > 4 ä¸ª

**ä¸¥é‡ç¨‹åº¦**: Low

**é‡æ„å»ºè®®**:

- Introduce Parameter Objectï¼ˆå¼•å…¥å‚æ•°å¯¹è±¡ï¼‰
- Preserve Whole Objectï¼ˆä¿æŒå¯¹è±¡å®Œæ•´ï¼‰
- Replace Parameter with Method Callï¼ˆä»¥æ–¹æ³•è°ƒç”¨å–ä»£å‚æ•°ï¼‰

---

### 5. Shotgun Surgeryï¼ˆæ•£å¼¹å¼ä¿®æ”¹ï¼‰

**æè¿°**: ä¸€ä¸ªå˜æ›´éœ€è¦ä¿®æ”¹å¤šä¸ªç±»

**æ£€æµ‹è§„åˆ™**:

- å•ä¸€èŒè´£çš„ä¿®æ”¹å½±å“ > 3 ä¸ªç±»
- è€¦åˆåº¦æŒ‡æ ‡å¼‚å¸¸é«˜

**ä¸¥é‡ç¨‹åº¦**: High

**é‡æ„å»ºè®®**:

- Move Methodï¼ˆç§»åŠ¨æ–¹æ³•ï¼‰
- Move Fieldï¼ˆç§»åŠ¨å­—æ®µï¼‰
- Inline Classï¼ˆå†…è”ç±»ï¼‰

---

### 6. Feature Envyï¼ˆä¾æ‹æƒ…ç»“ï¼‰

**æè¿°**: ä¸€ä¸ªæ–¹æ³•å¯¹å…¶ä»–ç±»çš„æ•°æ®è¿‡åº¦ä¾èµ–

**æ£€æµ‹è§„åˆ™**:

- æ–¹æ³•ä¸­å¤–éƒ¨ç±»çš„æ–¹æ³•/å­—æ®µè®¿é—® > æœ¬ç±»çš„è®¿é—®
- æ•°æ®è°ƒç”¨é“¾é•¿åº¦ > 2ï¼ˆa.b.c.method()ï¼‰

**ä¸¥é‡ç¨‹åº¦**: Medium

**é‡æ„å»ºè®®**:

- Move Methodï¼ˆç§»åŠ¨æ–¹æ³•ï¼‰
- Extract Methodï¼ˆæå–æ–¹æ³•ï¼‰

---

### 7. Data Clumpsï¼ˆæ•°æ®æ³¥å›¢ï¼‰

**æè¿°**: å¤šç»„æ•°æ®æ€»æ˜¯ä¸€èµ·å‡ºç°

**æ£€æµ‹è§„åˆ™**:

- ç›¸åŒçš„å‚æ•°ç»„åˆå‡ºç° â‰¥ 3 æ¬¡
- ç›¸åŒçš„å­—æ®µç»„åˆåœ¨å¤šä¸ªç±»ä¸­å‡ºç°

**ä¸¥é‡ç¨‹åº¦**: Low

**é‡æ„å»ºè®®**:

- Extract Classï¼ˆæå–ç±»ï¼‰
- Introduce Parameter Objectï¼ˆå¼•å…¥å‚æ•°å¯¹è±¡ï¼‰

---

### 8. Primitive Obsessionï¼ˆåŸºæœ¬ç±»å‹åæ‰§ï¼‰

**æè¿°**: è¿‡åº¦ä½¿ç”¨åŸºæœ¬ç±»å‹è€Œéå°å¯¹è±¡

**æ£€æµ‹è§„åˆ™**:

- å­—ç¬¦ä¸²ç”¨äºè¡¨ç¤ºç‰¹å®šæ¦‚å¿µï¼ˆå¦‚ email, phoneï¼‰
- æ•°å­—å¸¸é‡ç”¨äºç±»å‹ç 
- æ•°ç»„/Map ç”¨äºè¡¨ç¤ºç»“æ„åŒ–æ•°æ®

**ä¸¥é‡ç¨‹åº¦**: Low

**é‡æ„å»ºè®®**:

- Replace Data Value with Objectï¼ˆä»¥å¯¹è±¡å–ä»£æ•°æ®å€¼ï¼‰
- Replace Type Code with Classï¼ˆä»¥ç±»å–ä»£ç±»å‹ç ï¼‰
- Replace Array with Objectï¼ˆä»¥å¯¹è±¡å–ä»£æ•°ç»„ï¼‰

---

### 9. Switch Statementsï¼ˆè¿‡å¤šçš„ switch è¯­å¥ï¼‰

**æè¿°**: åŒæ ·çš„ switch/if-else é“¾å‡ºç°åœ¨å¤šå¤„

**æ£€æµ‹è§„åˆ™**:

- switch åˆ†æ”¯ > 5 ä¸ª
- ç›¸åŒçš„æ¡ä»¶åˆ¤æ–­åœ¨å¤šå¤„é‡å¤

**ä¸¥é‡ç¨‹åº¦**: Medium

**é‡æ„å»ºè®®**:

- Replace Conditional with Polymorphismï¼ˆä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼ï¼‰
- Replace Type Code with Subclassesï¼ˆä»¥å­ç±»å–ä»£ç±»å‹ç ï¼‰
- Replace Parameter with Explicit Methodsï¼ˆä»¥æ˜ç¡®å‡½æ•°å–ä»£å‚æ•°ï¼‰

---

### 10. Tight Couplingï¼ˆè¿‡åº¦è€¦åˆï¼‰

**æè¿°**: ç±»ä¹‹é—´ä¾èµ–è¿‡å¼ºï¼Œéš¾ä»¥ç‹¬ç«‹ä¿®æ”¹

**æ£€æµ‹è§„åˆ™**:

- å¾ªç¯ä¾èµ–
- ä¼ å…¥è€¦åˆï¼ˆAfferent Couplingï¼‰> 10
- ä¼ å‡ºè€¦åˆï¼ˆEfferent Couplingï¼‰> 10

**ä¸¥é‡ç¨‹åº¦**: High

**é‡æ„å»ºè®®**:

- Extract Interfaceï¼ˆæå–æ¥å£ï¼‰
- Dependency Injectionï¼ˆä¾èµ–æ³¨å…¥ï¼‰
- Inversion of Controlï¼ˆæ§åˆ¶åè½¬ï¼‰

---

## é—ç•™ç³»ç»Ÿç‰¹æœ‰æ°”å‘³

### å‰ç«¯é—ç•™æ°”å‘³

| æ°”å‘³             | æè¿°                     | æ£€æµ‹å…³é”®è¯                            | ä¸¥é‡ç¨‹åº¦ |
| ---------------- | ------------------------ | ------------------------------------- | -------- |
| jQuery Spaghetti | jQuery DOM æ“ä½œæ•£è½å„å¤„  | `$(.*)`, `jQuery(`, `.click(`, `.on(` | High     |
| Global State     | window å…¨å±€å˜é‡æ±¡æŸ“      | `window.`, éæ¨¡å—åŒ–è„šæœ¬               | High     |
| Callback Hell    | å¤šå±‚åµŒå¥—å›è°ƒ             | åµŒå¥—æ·±åº¦ > 3 å±‚                       | Medium   |
| $scope Pollution | AngularJS $scope æ»¥ç”¨    | `$scope.`, `$rootScope.`              | High     |
| Inline Styles    | è¡Œå†…æ ·å¼æ··ä¹±             | `style="`, åŠ¨æ€ style è®¾ç½®            | Low      |
| Script Tag Soup  | å¤šä¸ª script æ ‡ç­¾ä¾èµ–é¡ºåº | éæ¨¡å—åŒ– `<script>` å¼•å…¥              | Medium   |

### åç«¯é—ç•™æ°”å‘³

| æ°”å‘³              | æè¿°                | æ£€æµ‹å…³é”®è¯                    | ä¸¥é‡ç¨‹åº¦ |
| ----------------- | ------------------- | ----------------------------- | -------- |
| Monolithic Ball   | æ— è¾¹ç•Œçš„å·¨å‹å•ä½“    | æ–‡ä»¶æ•°/ä»£ç é‡å·¨å¤§ï¼Œæ— æ¨¡å—åˆ†å±‚ | Critical |
| Shared Database   | å¤šæœåŠ¡å…±äº«æ•°æ®åº“    | ç›´æ¥ SQL æ“ä½œï¼Œæ—  ORM æŠ½è±¡    | High     |
| Hardcoded Config  | é…ç½®å†™æ­»åœ¨ä»£ç é‡Œ    | ç¡¬ç¼–ç  URL, API Key, ç«¯å£å·   | Medium   |
| Session State     | æœ‰çŠ¶æ€æœåŠ¡          | å†…å­˜ç¼“å­˜, å…¨å±€å˜é‡å­˜çŠ¶æ€      | High     |
| No API Versioning | API æ— ç‰ˆæœ¬ç®¡ç†      | æ—  `/v1/`, `/v2/` è·¯å¾„        | Medium   |
| Raw SQL           | åŸå§‹ SQL å­—ç¬¦ä¸²æ‹¼æ¥ | å­—ç¬¦ä¸²æ‹¼æ¥ SQL, æ— å‚æ•°åŒ–      | Critical |

---

## é£é™©ç­‰çº§å®šä¹‰

| ç­‰çº§        | è¯´æ˜                   | å»ºè®®æ“ä½œ |
| ----------- | ---------------------- | -------- |
| ğŸŸ¢ Low      | è½»å¾®é—®é¢˜ï¼Œå¯å»¶åå¤„ç†   | å¯é€‰ä¿®å¤ |
| ğŸŸ¡ Medium   | ä¸­ç­‰é—®é¢˜ï¼Œåº”å°½å¿«å¤„ç†   | å»ºè®®ä¿®å¤ |
| ğŸ”¶ High     | ä¸¥é‡é—®é¢˜ï¼Œå½±å“å¯ç»´æŠ¤æ€§ | ä¼˜å…ˆä¿®å¤ |
| ğŸ”´ Critical | å…³é”®é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ•…éšœ | ç«‹å³ä¿®å¤ |

---

## å‚è€ƒèµ„æº

- Martin Fowler - Refactoring: Improving the Design of Existing Code
- Robert C. Martin - Clean Code
- https://refactoring.guru/refactoring/smells
