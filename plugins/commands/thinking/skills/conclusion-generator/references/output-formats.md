# 输出格式指南

## 格式选择规则

### 按问题类型自动选择

| 问题类型 | 推荐格式              | 原因                 |
| -------- | --------------------- | -------------------- |
| 是非判断 | brief                 | 直接回答即可         |
| 选择决策 | structured            | 需要对比分析         |
| 开放探索 | detailed              | 需要完整推理         |
| 代码实现 | actionable            | 需要可执行步骤       |
| 架构设计 | detailed + actionable | 需要完整分析和行动项 |

### 按深度级别调整

| 深度  | brief   | structured | detailed | actionable |
| ----- | ------- | ---------- | -------- | ---------- |
| light | ✅ 默认 | ⚪ 可选    | ❌ 不用  | ⚪ 可选    |
| deep  | ⚪ 可选 | ✅ 默认    | ⚪ 可选  | ✅ 推荐    |
| ultra | ❌ 不用 | ⚪ 可选    | ✅ 默认  | ✅ 必须    |

## 格式详细说明

### 1. Brief（简洁）

**适用场景**：

- 简单问题
- 是非判断
- 快速确认

**格式要求**：

- 1-3 句话总结
- 直接给出答案
- 可选：置信度标注

**示例**：

```markdown
## 结论

是的，应该使用 TypeScript。主要原因是类型安全和更好的 IDE 支持。

置信度：高
```

### 2. Structured（结构化）

**适用场景**：

- 对比分析
- 选择决策
- 多方案评估

**格式要求**：

- 分点列出
- 使用表格对比
- 包含推荐选项

**示例**：

```markdown
## 方案对比

| 方案     | 优点   | 缺点       | 推荐度   |
| -------- | ------ | ---------- | -------- |
| Redis    | 高性能 | 需要运维   | ⭐⭐⭐⭐ |
| 内存缓存 | 简单   | 不可持久化 | ⭐⭐⭐   |

## 推荐

选择 **Redis**，因为项目需要跨实例共享缓存。
```

### 3. Detailed（详细）

**适用场景**：

- 复杂分析
- 架构设计
- 深度探索

**格式要求**：

- 完整推理过程
- 多层次分析
- 包含假设和依据
- 置信度评估

**示例**：

```markdown
## 分析过程

### 1. 问题理解

{对问题的深度理解}

### 2. 关键假设

- 假设 1: {内容}
- 假设 2: {内容}

### 3. 推理步骤

{详细推理过程}

### 4. 结论

{最终结论}

### 5. 置信度

- 整体置信度：中
- 不确定点：{列表}
```

### 4. Actionable（可执行）

**适用场景**：

- 实现指导
- 任务分解
- 操作指南

**格式要求**：

- 明确的行动项
- 优先级排序
- 依赖关系说明
- 验证标准

**示例**：

```markdown
## 行动计划

### 第一阶段：准备

- [ ] 安装依赖：`npm install redis`
- [ ] 配置连接参数

### 第二阶段：实现

- [ ] 创建 Redis 客户端封装
- [ ] 实现缓存读写方法

### 第三阶段：验证

- [ ] 单元测试
- [ ] 性能测试

### 验收标准

- 缓存命中率 > 80%
- 响应时间 < 50ms
```

## 混合格式

对于复杂问题，可以组合多种格式：

```markdown
## 摘要（Brief）

{1-2 句话核心结论}

## 详细分析（Detailed）

{完整推理过程}

## 方案对比（Structured）

{表格对比}

## 行动计划（Actionable）

{可执行步骤}
```

## 格式校验规则

| 格式       | 必须包含   | 字数范围    |
| ---------- | ---------- | ----------- |
| brief      | 核心结论   | 50-200 字   |
| structured | 表格/列表  | 200-500 字  |
| detailed   | 推理过程   | 500-2000 字 |
| actionable | 行动项清单 | 300-1000 字 |
