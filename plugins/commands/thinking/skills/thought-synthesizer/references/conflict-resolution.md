# 冲突解决规则

## 冲突类型分类

### 1. 结论冲突（Conclusion Conflict）

**定义**：多个模型对同一问题得出不同结论

**示例**：

- Codex: "应该使用 Redis 缓存"
- Gemini: "应该使用内存缓存"

**解决策略**：

1. 分析各模型的推理依据
2. 识别隐含假设差异
3. 根据上下文选择最适合的结论
4. 如无法决策，标记为"待用户确认"

### 2. 推理路径冲突（Reasoning Conflict）

**定义**：结论相同但推理过程不同

**示例**：

- Codex: "通过性能分析得出需要优化"
- Claude: "通过代码复杂度分析得出需要优化"

**解决策略**：

1. 保留所有推理路径
2. 标记为"多路径验证"
3. 综合多个视角增强结论可信度

### 3. 假设冲突（Assumption Conflict）

**定义**：模型基于不同假设进行推理

**示例**：

- Codex 假设: "系统是高并发场景"
- Gemini 假设: "系统是低流量场景"

**解决策略**：

1. 识别并列出所有假设
2. 验证假设的合理性
3. 请求用户澄清实际场景
4. 根据确认的假设重新评估

## 冲突解决流程

```
检测冲突 ──→ 分类冲突 ──→ 分析原因 ──→ 应用策略 ──→ 生成报告
    │           │           │           │
    └───────────┴───────────┴───────────┘
              记录冲突详情
```

## 冲突优先级

| 优先级 | 冲突类型     | 处理方式               |
| ------ | ------------ | ---------------------- |
| P0     | 安全相关冲突 | 立即标记，需人工审核   |
| P1     | 架构决策冲突 | 详细分析，提供多方案   |
| P2     | 实现细节冲突 | 记录分歧，选择主流方案 |
| P3     | 风格偏好冲突 | 简单记录，不影响结论   |

## 决策矩阵

### 当 Codex 和 Claude 冲突时

| 场景     | 优先采信 | 原因             |
| -------- | -------- | ---------------- |
| 代码实现 | Codex    | 代码执行能力更强 |
| 架构设计 | Claude   | 整体把控能力更强 |
| 安全分析 | 双方验证 | 需要交叉确认     |

### 当 Gemini 和其他模型冲突时

| 场景       | 优先采信     | 原因             |
| ---------- | ------------ | ---------------- |
| UI/UX 设计 | Gemini       | 创意和设计感更强 |
| 用户体验   | Gemini       | 用户洞察能力更强 |
| 技术可行性 | Codex/Claude | 技术评估更准确   |

## 冲突记录模板

```markdown
## 冲突记录 #N

**冲突类型**: {结论/推理/假设}
**优先级**: {P0/P1/P2/P3}

### 冲突内容

| 模型   | 观点   | 推理依据 |
| ------ | ------ | -------- |
| Codex  | {观点} | {依据}   |
| Gemini | {观点} | {依据}   |
| Claude | {观点} | {依据}   |

### 假设差异

- Codex 假设: {假设}
- Gemini 假设: {假设}

### 解决方案

**采信结论**: {最终结论}
**采信原因**: {原因说明}
**保留意见**: {需要记录的其他观点}

### 后续建议

- [ ] {待验证事项}
- [ ] {待确认事项}
```

## 无法解决的冲突

当出现以下情况时，标记为"待用户决策"：

1. **信息不足**：需要更多上下文才能判断
2. **主观偏好**：取决于用户/团队偏好
3. **同等有效**：多个方案同样可行
4. **高风险决策**：影响重大，需人工确认

### 上报格式

```markdown
⚠️ 需要用户决策

**冲突摘要**: {简述}

**选项 A**: {方案 A}

- 优点: {列表}
- 风险: {列表}

**选项 B**: {方案 B}

- 优点: {列表}
- 风险: {列表}

**建议**: {如有倾向性建议}
```
