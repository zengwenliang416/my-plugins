---
name: code-implementer
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘å¼€å‘å·¥ä½œæµç¬¬å››æ­¥ï¼šåŸºäºåŸå‹é‡æ„å¹¶å®æ–½ä»£ç åˆ°é¡¹ç›®ä¸­ã€‚
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/changes.md + å®é™…ä»£ç å˜æ›´ã€‚
  ã€ä¸è§¦å‘ã€‘åŸå‹ç”Ÿæˆï¼ˆç”¨ prototype-generatorï¼‰ã€å®¡è®¡å®¡æŸ¥ï¼ˆç”¨ audit-reviewerï¼‰ã€‚
  ã€å¼ºåˆ¶å·¥å…·ã€‘å¿…é¡»è°ƒç”¨ codex-cli æˆ– gemini-cli Skill é‡æ„åŸå‹ï¼Œç¦æ­¢ Claude è‡ªè¡Œå®æ–½ã€‚
allowed-tools:
  - Read
  - Write
  - Edit
  - Skill
  - LSP
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„ï¼ˆç”± orchestrator ä¼ å…¥ï¼‰
  - name: model
    type: string
    required: true
    description: å®æ–½æ¨¡å‹ï¼ˆcodex æˆ– geminiï¼‰
  - name: focus
    type: string
    required: false
    description: å…³æ³¨é¢†åŸŸï¼ˆbackend,api,logic æˆ– frontend,ui,stylesï¼‰
---

# Code Implementer - ä»£ç å®æ–½åŸå­æŠ€èƒ½

## ğŸš¨ CRITICAL: å¿…é¡»è°ƒç”¨ codex-cli æˆ– gemini-cli Skill

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ ç¦æ­¢ï¼šClaude è‡ªå·±å®æ–½ä»£ç ï¼ˆè·³è¿‡å¤–éƒ¨æ¨¡å‹ï¼‰                     â”‚
â”‚  âŒ ç¦æ­¢ï¼šç›´æ¥ Bash è°ƒç”¨ codeagent-wrapper                       â”‚
â”‚  âœ… å¿…é¡»ï¼šé€šè¿‡ Skill å·¥å…·è°ƒç”¨ codex-cli æˆ– gemini-cli            â”‚
â”‚                                                                  â”‚
â”‚  è¿™æ˜¯å¤šæ¨¡å‹åä½œçš„æ ¸å¿ƒï¼Claude ä¸èƒ½æ›¿ä»£ Codex/Gemini å®æ–½ï¼        â”‚
â”‚                                                                  â”‚
â”‚  æ‰§è¡Œé¡ºåºï¼ˆå¿…é¡»éµå¾ªï¼‰ï¼š                                          â”‚
â”‚  1. è¯»å– prototype-{model}.diff                                 â”‚
â”‚  2. Skill è°ƒç”¨ codex-cli æˆ– gemini-cli é‡æ„åŸå‹                  â”‚
â”‚  3. éªŒè¯å¹¶åº”ç”¨å˜æ›´ï¼Œå†™å…¥ changes.md                              â”‚
â”‚                                                                  â”‚
â”‚  å¦‚æœè·³è¿‡ Step 2ï¼Œæ•´ä¸ªå¤šæ¨¡å‹åä½œå¤±æ•ˆï¼                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## èŒè´£è¾¹ç•Œ

- **è¾“å…¥**: `run_dir` + `model` + `focus`ï¼ˆåŒ…å« `${run_dir}/prototype-{model}.diff`ï¼‰
- **è¾“å‡º**: å®é™…ä»£ç å˜æ›´ + `${run_dir}/changes-{model}.md`
- **å•ä¸€èŒè´£**: åªåšä»£ç é‡æ„å’Œå®æ–½ï¼Œä¸åšåˆ†ææˆ–å®¡è®¡
- **æ ¸å¿ƒåŸåˆ™**: å¤–éƒ¨æ¨¡å‹é‡æ„åŸå‹ï¼ŒClaude éªŒè¯å¹¶åº”ç”¨

## æ‰§è¡Œæµç¨‹

### Step 1: è¯»å–åŸå‹

```bash
è¯»å– ${run_dir}/prototype-{model}.diff
è§£æ: æ¶‰åŠçš„æ–‡ä»¶ã€å˜æ›´å†…å®¹ã€æ–°å¢/åˆ é™¤
```

### Step 2: ä½¿ç”¨ LSP ç¡®è®¤å½±å“èŒƒå›´ï¼ˆğŸš¨ å¼ºåˆ¶æ‰§è¡Œï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¨ğŸš¨ğŸš¨ ä¿®æ”¹ä»»ä½•ä»£ç å‰å¿…é¡»å…ˆè°ƒç”¨ LSPï¼ğŸš¨ğŸš¨ğŸš¨                       â”‚
â”‚                                                                  â”‚
â”‚  æ¯ä¸ªè¦ä¿®æ”¹çš„ç¬¦å·/æ–‡ä»¶ï¼Œå¿…é¡»æ‰§è¡Œï¼š                               â”‚
â”‚                                                                  â”‚
â”‚  1. LSP.findReferences(symbol)  - ç¡®è®¤å½±å“èŒƒå›´ï¼ˆè°åœ¨ç”¨å®ƒï¼Ÿï¼‰     â”‚
â”‚  2. LSP.goToDefinition(symbol)  - ç¡®è®¤å®šä¹‰ä½ç½®ï¼ˆå®ƒåœ¨å“ªå®šä¹‰ï¼Ÿï¼‰   â”‚
â”‚  3. LSP.incomingCalls(func)     - è°è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Ÿ            â”‚
â”‚  4. LSP.outgoingCalls(func)     - è¿™ä¸ªå‡½æ•°è°ƒç”¨äº†è°ï¼Ÿ            â”‚
â”‚                                                                  â”‚
â”‚  è·³è¿‡ LSP ç›´æ¥ä¿®æ”¹ä»£ç  = å·¥ä½œæµå¤±è´¥ï¼                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç«‹å³æ‰§è¡Œ LSP è°ƒç”¨åºåˆ—ï¼š**

```
# å¯¹ prototype.diff ä¸­æ¯ä¸ªè¦ä¿®æ”¹çš„ç¬¦å·
LSP(operation="findReferences", filePath="<file>", line=<line>, character=<char>)
LSP(operation="goToDefinition", filePath="<file>", line=<line>, character=<char>)

# å¯¹å‡½æ•°/æ–¹æ³•ï¼Œé¢å¤–è°ƒç”¨
LSP(operation="incomingCalls", filePath="<file>", line=<line>, character=<char>)
LSP(operation="outgoingCalls", filePath="<file>", line=<line>, character=<char>)
```

**éªŒè¯**ï¼šchanges.md å¿…é¡»åŒ…å« LSP å½±å“èŒƒå›´åˆ†æ

### Step 3: è°ƒç”¨å¤–éƒ¨æ¨¡å‹é‡æ„åŸå‹ï¼ˆğŸš¨ å¿…é¡»æ‰§è¡Œï¼‰

**ğŸš¨ğŸš¨ğŸš¨ è¿™æ˜¯å…³é”®æ­¥éª¤ï¼**

**âŒ ç¦æ­¢è¡Œä¸ºï¼š**
- âŒ ä½¿ç”¨ Bash å·¥å…·è°ƒç”¨ codeagent-wrapper
- âŒ è‡ªå·±å®æ–½ä»£ç 
- âŒ ä½¿ç”¨ Write/Edit å·¥å…·ç›´æ¥å†™ä»£ç 

**âœ… å”¯ä¸€æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ Skill å·¥å…·**

**å¯¹äº Codex æ¨¡å‹ï¼ˆåç«¯å®æ–½ï¼‰ï¼Œç«‹å³æ‰§è¡Œï¼š**

```
Skill(skill="codex-cli", args="--role architect --prompt 'é‡æ„å¹¶å®Œå–„åŸå‹ä»£ç ã€‚åŸå‹æ–‡ä»¶è·¯å¾„: ${RUN_DIR}/prototype-codex.diffã€‚è¯·å…ˆè¯»å–è¯¥æ–‡ä»¶ï¼Œç„¶åé‡æ„ã€‚è¦æ±‚: 1.è°ƒæ•´ä¸ºé¡¹ç›®ä»£ç é£æ ¼ 2.ç²¾ç®€å†—ä½™ 3.è¡¥å……ç±»å‹å®šä¹‰ 4.å¢å¼ºé”™è¯¯å¤„ç† 5.ä¿®å¤å®‰å…¨æ¼æ´ã€‚OUTPUT FORMAT: Unified Diff Patch + å˜æ›´è¯´æ˜'")
```

**å¯¹äº Gemini æ¨¡å‹ï¼ˆå‰ç«¯å®æ–½ï¼‰ï¼Œç«‹å³æ‰§è¡Œï¼š**

```
Skill(skill="gemini-cli", args="--role frontend --prompt 'é‡æ„å¹¶å®Œå–„åŸå‹ä»£ç ã€‚åŸå‹æ–‡ä»¶è·¯å¾„: ${RUN_DIR}/prototype-gemini.diffã€‚è¯·å…ˆè¯»å–è¯¥æ–‡ä»¶ï¼Œç„¶åé‡æ„ã€‚è¦æ±‚: 1.è°ƒæ•´ä¸ºé¡¹ç›®ä»£ç é£æ ¼ 2.ä¼˜åŒ–ç»„ä»¶ç»“æ„ 3.å®Œå–„æ ·å¼ 4.ç¡®ä¿å“åº”å¼ 5.å¢å¼ºå¯è®¿é—®æ€§ã€‚OUTPUT FORMAT: Unified Diff Patch + å˜æ›´è¯´æ˜'")
```

**âš ï¸ å¦‚æœä½ å‘ç°è‡ªå·±åœ¨ç”¨ Bash/Write/Edit å†™ä»£ç ï¼Œç«‹å³åœæ­¢å¹¶æ”¹ç”¨ Skill å·¥å…·ï¼**

### Step 4: éªŒè¯é‡æ„ç»“æœ

å¤–éƒ¨æ¨¡å‹è¿”å›é‡æ„åçš„ diffï¼ŒClaude è¿›è¡ŒéªŒè¯ï¼š

| æ£€æŸ¥é¡¹        | åŠ¨ä½œ       |
| ------------- | ---------- |
| diff æ ¼å¼æœ‰æ•ˆ | ç¡®ä¿å¯åº”ç”¨ |
| ä»£ç è¯­æ³•æ­£ç¡®  | è¯­æ³•æ£€æŸ¥   |
| ç±»å‹å®šä¹‰å®Œæ•´  | ç±»å‹æ£€æŸ¥   |
| æ— å®‰å…¨æ¼æ´    | å®‰å…¨æ‰«æ   |
| ç¬¦åˆé¡¹ç›®è§„èŒƒ  | é£æ ¼æ£€æŸ¥   |

### Step 5: åº”ç”¨å˜æ›´

```bash
for each æ–‡ä»¶å˜æ›´ in é‡æ„åçš„ diff:
    è¯»å–ç›®æ ‡æ–‡ä»¶
    ä½¿ç”¨ Edit å·¥å…·åº”ç”¨å˜æ›´
    éªŒè¯å˜æ›´æ­£ç¡®æ€§
```

### Step 6: éªŒè¯

```bash
# ç±»å‹æ£€æŸ¥ï¼ˆå¦‚é€‚ç”¨ï¼‰
if [ -f "tsconfig.json" ]; then
    npx tsc --noEmit
fi

# è¯­æ³•æ£€æŸ¥ï¼ˆå¦‚é€‚ç”¨ï¼‰
if [ -f "package.json" ]; then
    npm run lint 2>/dev/null || true
fi
```

### Step 7: è¾“å‡ºå˜æ›´æ¸…å•

å°†å®æ–½ç»“æœå†™å…¥ `${run_dir}/changes-{model}.md`ï¼š

```markdown
# ä»£ç å®æ–½æŠ¥å‘Š ({model})

## å®æ–½æ¦‚è¿°

- åŸºäºåŸå‹: prototype-{model}.diff
- å®æ–½æ¨¡å‹: {codex|gemini}
- å®æ–½æ—¶é—´: [timestamp]
- å…³æ³¨é¢†åŸŸ: {focus}

## å˜æ›´æ¸…å•

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶       | è¯´æ˜       | è¡Œæ•° |
| ---------- | ---------- | ---- |
| src/new.ts | æ–°åŠŸèƒ½å®ç° | 50   |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶             | å˜æ›´ç±»å‹ | è¯´æ˜           |
| ---------------- | -------- | -------------- |
| src/foo.ts:20-35 | æ–°å¢æ–¹æ³• | æ·»åŠ  newMethod |
| src/bar.ts:10    | ä¿®æ”¹å¯¼å…¥ | å¼•å…¥æ–°ä¾èµ–     |

### åˆ é™¤æ–‡ä»¶

æ— 

## é‡æ„è¯´æ˜

| åŸå‹å†…å®¹     | é‡æ„è°ƒæ•´         | åŸå›          |
| ------------ | ---------------- | ------------ |
| ç›´æ¥æŠ›å‡ºå¼‚å¸¸ | åŒ…è£…ä¸ºè‡ªå®šä¹‰é”™è¯¯ | ç»Ÿä¸€é”™è¯¯å¤„ç† |
| any ç±»å‹     | å…·ä½“ç±»å‹å®šä¹‰     | ç±»å‹å®‰å…¨     |

## éªŒè¯ç»“æœ

- [x] ç±»å‹æ£€æŸ¥é€šè¿‡
- [x] è¯­æ³•æ£€æŸ¥é€šè¿‡
- [ ] å•å…ƒæµ‹è¯•ï¼ˆå¾…è¿è¡Œï¼‰

---

ä¸‹ä¸€æ­¥: è°ƒç”¨ audit-reviewer è¿›è¡Œå®¡è®¡
```

## å¹¶è¡Œæ‰§è¡Œï¼ˆåå°æ¨¡å¼ï¼‰

æ”¯æŒåŒæ¨¡å‹å¹¶è¡Œå®æ–½ï¼Œç”±ç¼–æ’å™¨ä½¿ç”¨ Task å·¥å…·åè°ƒï¼š

```
# ç¼–æ’å™¨ä¸­çš„è°ƒç”¨
Task(skill="code-implementer", args="run_dir=${RUN_DIR} model=codex focus=backend,api,logic", run_in_background=true) &
Task(skill="code-implementer", args="run_dir=${RUN_DIR} model=gemini focus=frontend,ui,styles", run_in_background=true) &
wait
# åˆå¹¶å˜æ›´æ¸…å•
```

è¾“å‡ºæ–‡ä»¶:

- `${run_dir}/changes-codex.md` (åç«¯å˜æ›´)
- `${run_dir}/changes-gemini.md` (å‰ç«¯å˜æ›´)
- `${run_dir}/changes.md` (åˆå¹¶å)

## è¿”å›å€¼

æ‰§è¡Œå®Œæˆåï¼Œè¿”å›ï¼š

```
ä»£ç å®æ–½å®Œæˆï¼ˆ{model}ï¼‰ã€‚
è¾“å‡ºæ–‡ä»¶: ${run_dir}/changes-{model}.md
å˜æ›´æ–‡ä»¶: X ä¸ª
æ–°å¢è¡Œæ•°: +Y
åˆ é™¤è¡Œæ•°: -Z

âœ… ç±»å‹æ£€æŸ¥: é€šè¿‡
âœ… è¯­æ³•æ£€æŸ¥: é€šè¿‡

ä¸‹ä¸€æ­¥: ä½¿ç”¨ audit-reviewer è¿›è¡Œå®¡è®¡
```

## è´¨é‡é—¨æ§

- âœ… ğŸš¨ ä¿®æ”¹å‰è°ƒç”¨äº† LSPï¼ˆfindReferences + goToDefinitionï¼‰è‡³å°‘ 3 æ¬¡
- âœ… changes.md åŒ…å« LSP å½±å“èŒƒå›´åˆ†æ
- âœ… æ‰€æœ‰å˜æ›´å·²åº”ç”¨
- âœ… ç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… æ— ç ´åæ€§å˜æ›´ï¼ˆé™¤éæ˜ç¡®è¦æ±‚ï¼‰
- âœ… ä»£ç é£æ ¼ç¬¦åˆé¡¹ç›®è§„èŒƒ

## çº¦æŸ

- ä¸åšéœ€æ±‚åˆ†æï¼ˆäº¤ç»™ multi-model-analyzerï¼‰
- ä¸åšåŸå‹ç”Ÿæˆï¼ˆäº¤ç»™ prototype-generatorï¼‰
- ä¸åšå®¡è®¡ï¼ˆäº¤ç»™ audit-reviewerï¼‰
- ä¿®æ”¹å‰å¿…é¡»ç”¨ LSP ç¡®è®¤å½±å“èŒƒå›´
- æ¯ä¸ªå˜æ›´å¿…é¡»å¯è¿½æº¯ï¼ˆè®°å½•åœ¨ changes.mdï¼‰

## ğŸš¨ å¼ºåˆ¶å·¥å…·éªŒè¯

**æ‰§è¡Œæ­¤ Skill åï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š**

| æ£€æŸ¥é¡¹              | è¦æ±‚ | éªŒè¯æ–¹å¼                            |
| ------------------- | ---- | ----------------------------------- |
| Skill è°ƒç”¨          | å¿…é¡» | æ£€æŸ¥ codex-cli æˆ– gemini-cli è¢«è°ƒç”¨ |
| å¤–éƒ¨æ¨¡å‹è¾“å‡º        | å¿…é¡» | changes-{model}.md åŒ…å«é‡æ„ç»“æœ     |
| Claude è‡ªè¡Œå®æ–½     | ç¦æ­¢ | ä¸èƒ½è·³è¿‡ Skill ç›´æ¥å†™ä»£ç            |
| ç›´æ¥ Bash codeagent | ç¦æ­¢ | å¿…é¡»é€šè¿‡ Skill å·¥å…·è°ƒç”¨             |

**å¦‚æœæ²¡æœ‰è°ƒç”¨ codex-cli æˆ– gemini-cli Skillï¼Œæ­¤ Skill æ‰§è¡Œå¤±è´¥ï¼**
