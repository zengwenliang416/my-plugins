# Multi-Model Analysis Templates Reference

多模型分析模板：需求分析、方案设计、架构决策。

---

## 1. 分析 Prompt 模板

### 1.1 Codex 分析 Prompt

```
你是一位资深后端架构师。基于以下上下文，分析需求并给出实施方案。

## 上下文

${context.md 内容}

## 任务

${任务描述}

## 分析要求

请提供：

1. **需求理解**
   - 核心功能点
   - 边界条件
   - 非功能性需求

2. **技术方案**
   - 架构设计
   - 数据模型
   - 接口设计

3. **实施步骤**
   - 分阶段实施计划
   - 每阶段的交付物

4. **风险评估**
   - 技术风险
   - 依赖风险
   - 缓解措施

5. **测试策略**
   - 单元测试重点
   - 集成测试场景

输出格式：Markdown
```

### 1.2 Gemini 分析 Prompt

```
你是一位资深前端架构师。基于以下上下文，分析需求并给出 UI/UX 实施方案。

## 上下文

${context.md 内容}

## 任务

${任务描述}

## 分析要求

请提供：

1. **需求理解**
   - 用户故事
   - 交互流程
   - 设计约束

2. **UI 方案**
   - 组件结构
   - 状态管理
   - 样式系统

3. **UX 考量**
   - 可访问性
   - 响应式设计
   - 性能优化

4. **实施步骤**
   - 组件开发顺序
   - 依赖关系

5. **测试策略**
   - 组件测试
   - E2E 测试场景

输出格式：Markdown
```

---

## 2. 输出文档模板

### 2.1 analysis-{model}.md 结构

```markdown
---
model: codex | gemini
analyzed_at: 2026-01-17T12:00:00Z
task: [任务描述]
confidence: high | medium | low
---

# 需求分析报告

## 1. 需求理解

### 1.1 核心功能

- **功能 1**: [描述]
- **功能 2**: [描述]

### 1.2 边界条件

- [边界条件 1]
- [边界条件 2]

### 1.3 非功能性需求

| 类型 | 要求 |
|------|------|
| 性能 | [要求] |
| 安全 | [要求] |
| 可用性 | [要求] |

## 2. 技术方案

### 2.1 架构设计

\`\`\`
[架构图 / 组件图]
\`\`\`

### 2.2 数据模型

\`\`\`typescript
interface Model {
  // ...
}
\`\`\`

### 2.3 接口设计

| 接口 | 方法 | 描述 |
|------|------|------|
| [path] | [method] | [描述] |

## 3. 实施步骤

### Phase 1: [阶段名称]

**目标**: [目标描述]

**交付物**:
- [ ] [交付物 1]
- [ ] [交付物 2]

**预计工作量**: [估算]

### Phase 2: [阶段名称]

...

## 4. 风险评估

| 风险 | 影响 | 概率 | 缓解措施 |
|------|------|------|----------|
| [风险描述] | 高/中/低 | 高/中/低 | [措施] |

## 5. 测试策略

### 5.1 单元测试

\`\`\`typescript
describe('[模块]', () => {
  it('[测试用例]', () => {
    // ...
  });
});
\`\`\`

### 5.2 集成测试

- [ ] [测试场景 1]
- [ ] [测试场景 2]

## 6. 依赖

### 6.1 内部依赖

- [模块/文件]: [依赖原因]

### 6.2 外部依赖

- [包名]: [版本] - [用途]

## 7. 置信度说明

**置信度**: [high/medium/low]

**原因**:
- [原因 1]
- [原因 2]
```

---

## 3. 架构决策记录 (ADR)

### 3.1 ADR 模板

```markdown
# ADR-[编号]: [标题]

## 状态

[Proposed | Accepted | Deprecated | Superseded]

## 上下文

[描述面临的问题和约束]

## 决策

[描述做出的决策]

## 方案对比

| 方案 | 优点 | 缺点 |
|------|------|------|
| 方案 A | [...] | [...] |
| 方案 B | [...] | [...] |

## 结果

[描述决策带来的影响]

## 参考

- [相关文档/讨论链接]
```

---

## 4. 模型路由规则

### 4.1 任务类型路由

| 任务类型 | 推荐模型 | 原因 |
|----------|----------|------|
| 后端逻辑 | Codex | 复杂链路分析能力强 |
| API 设计 | Codex | 接口设计经验丰富 |
| 数据库设计 | Codex | Schema 设计专长 |
| 前端 UI | Gemini | 设计趋势敏感 |
| CSS/样式 | Gemini | 视觉效果优化 |
| 交互设计 | Gemini | UX 理解深入 |
| 跨端任务 | 双模型 | 各取所长 |
| 代码审查 | 双模型 | 交叉验证 |

### 4.2 并行 vs 串行

```
并行场景:
- 前后端分离任务
- 独立模块开发
- 多方案对比

串行场景:
- 依赖前序分析
- 需要迭代优化
- 深度分析单一问题
```

---

## 5. 分析质量检查

### 5.1 检查清单

- [ ] 需求理解完整
- [ ] 技术方案可行
- [ ] 实施步骤清晰
- [ ] 风险识别充分
- [ ] 测试策略覆盖关键场景
- [ ] 依赖明确列出

### 5.2 置信度评估

| 因素 | high | medium | low |
|------|------|--------|-----|
| 需求清晰度 | 明确 | 部分模糊 | 不清晰 |
| 上下文完整性 | 完整 | 部分缺失 | 严重不足 |
| 技术可行性 | 已验证 | 理论可行 | 存疑 |
| 实施复杂度 | 低 | 中 | 高 |

---

## 6. 差异合并

### 6.1 多模型输出合并

当使用双模型分析时，需要合并输出：

```markdown
# 综合分析报告

## Codex 分析要点

[Codex 核心观点]

## Gemini 分析要点

[Gemini 核心观点]

## 差异分析

| 方面 | Codex | Gemini | 结论 |
|------|-------|--------|------|
| [方面] | [观点] | [观点] | [采纳建议] |

## 综合方案

[合并后的最终方案]
```

### 6.2 冲突解决

```
冲突解决优先级:
1. 以更保守的方案为准（安全优先）
2. 以有更多上下文支持的方案为准
3. 需要用户确认时明确标注
```
