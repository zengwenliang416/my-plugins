---
name: message-generator
description: |
  ã€è§¦å‘æ¡ä»¶ã€‘commit å·¥ä½œæµç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆ Conventional Commit æäº¤ä¿¡æ¯ã€‚
  ã€æ ¸å¿ƒäº§å‡ºã€‘è¾“å‡º ${run_dir}/commit-message.mdï¼ŒåŒ…å«æ ‡é¢˜ã€æ­£æ–‡ã€footerã€‚
  ã€ä¸è§¦å‘ã€‘åˆ†æå˜æ›´ï¼ˆç”¨ change-analyzerï¼‰ã€æ‰§è¡Œæäº¤ï¼ˆç”¨ commit-executorï¼‰ã€‚
  ã€å…ˆé—®ä»€ä¹ˆã€‘changes-analysis.json ç¼ºå¤±æ—¶ï¼Œè¯¢é—®æ˜¯å¦å…ˆæ‰§è¡Œå˜æ›´åˆ†æ
allowed-tools:
  - Read
  - Write
  - mcp__sequential-thinking__sequentialthinking
arguments:
  - name: run_dir
    type: string
    required: true
    description: è¿è¡Œç›®å½•è·¯å¾„ï¼ˆåŒ…å« changes-analysis.jsonï¼‰
  - name: options
    type: string
    required: false
    description: ç”¨æˆ·é€‰é¡¹ JSONï¼ˆå¦‚ '{"emoji": true, "type": "feat", "scope": "api"}'ï¼‰
---

# Message Generator - æäº¤ä¿¡æ¯ç”ŸæˆåŸå­æŠ€èƒ½

## MCP å·¥å…·é›†æˆ

| MCP å·¥å…·              | ç”¨é€”                                 | è§¦å‘æ¡ä»¶        |
| --------------------- | ------------------------------------ | --------------- |
| `sequential-thinking` | ç»“æ„åŒ–æ¶ˆæ¯ç”Ÿæˆç­–ç•¥ï¼Œç¡®ä¿æ ¼å¼è§„èŒƒä¸€è‡´ | ğŸš¨ æ¯æ¬¡æ‰§è¡Œå¿…ç”¨ |

## æ‰§è¡Œæµç¨‹

### Step 0: ç»“æ„åŒ–æ¶ˆæ¯ç”Ÿæˆè§„åˆ’ï¼ˆsequential-thinkingï¼‰

ğŸš¨ **å¿…é¡»é¦–å…ˆä½¿ç”¨ sequential-thinking è§„åˆ’æ¶ˆæ¯ç”Ÿæˆç­–ç•¥**

```
mcp__sequential-thinking__sequentialthinking({
  thought: "è§„åˆ’æ¶ˆæ¯ç”Ÿæˆç­–ç•¥ã€‚éœ€è¦ï¼š1) è¯»å–åˆ†æç»“æœ 2) è§£æç”¨æˆ·é€‰é¡¹ 3) é€‰æ‹© Emoji 4) ç”Ÿæˆæ ‡é¢˜/æ­£æ–‡/Footer 5) å†™å…¥ç»“æœæ–‡ä»¶",
  thoughtNumber: 1,
  totalThoughts: 5,
  nextThoughtNeeded: true
})
```

**æ€è€ƒæ­¥éª¤**ï¼š

1. **åˆ†æç»“æœè¯»å–**ï¼šä» changes-analysis.json æå–ç±»å‹ã€ä½œç”¨åŸŸã€ç­–ç•¥
2. **ç”¨æˆ·é€‰é¡¹è§£æ**ï¼šå¤„ç† emojiã€typeã€scopeã€breaking ç­‰é€‰é¡¹
3. **Emoji é€‰æ‹©**ï¼šæ ¹æ® commit ç±»å‹ä»æ˜ å°„è¡¨é€‰å– emoji
4. **æ¶ˆæ¯ç”Ÿæˆ**ï¼šç”Ÿæˆæ ‡é¢˜ï¼ˆâ‰¤72å­—ç¬¦ï¼‰ã€æ­£æ–‡ã€Footer
5. **ç»“æœå†™å…¥**ï¼šå†™å…¥ commit-message.md å¹¶éªŒè¯æ ¼å¼

---

## ğŸš¨ğŸš¨ğŸš¨ å¼ºåˆ¶æ‰§è¡Œè§„åˆ™ï¼ˆä¸å¯è·³è¿‡ï¼‰

**ç¦æ­¢ä»¥ä¸‹è¡Œä¸ºï¼š**

- âŒ ä¸ä½¿ç”¨ emoji
- âŒ ä½¿ç”¨è‹±æ–‡æè¿°
- âŒ è‡ªè¡Œå†³å®šæ ¼å¼
- âŒ è·³è¿‡ emoji æ˜ å°„è¡¨

**å¿…é¡»éµå®ˆï¼š**

- âœ… æ ¼å¼å¿…é¡»æ˜¯ï¼š`type(scope): emoji ç®€çŸ­æè¿°`
- âœ… emoji å¿…é¡»æ¥è‡ªä¸‹æ–¹æ˜ å°„è¡¨
- âœ… æè¿°å¿…é¡»ä½¿ç”¨ä¸­æ–‡
- âœ… ç¤ºä¾‹ï¼š`feat(components): âœ¨ æ–°å¢ Button ç»„ä»¶`

---

## èŒè´£è¾¹ç•Œ

- **è¾“å…¥**: `run_dir`ï¼ˆåŒ…å« `changes-analysis.json`ï¼‰+ `options`
- **è¾“å‡º**: `${run_dir}/commit-message.md`
- **å•ä¸€èŒè´£**: åªç”Ÿæˆæäº¤ä¿¡æ¯ï¼Œä¸åšåˆ†æï¼Œä¸æ‰§è¡Œæäº¤

---

## æ‰§è¡Œæµç¨‹

### Step 1: è¯»å–åˆ†æç»“æœ

è¯»å– `${run_dir}/changes-analysis.json`ï¼Œæå–ï¼š

- `primary_type`
- `primary_scope`
- `commit_strategy`
- `files_by_type`

### Step 2: è§£æç”¨æˆ·é€‰é¡¹

ä» `options` å‚æ•°è§£æï¼ˆå¦‚æœ‰ï¼‰ï¼š

| é€‰é¡¹       | è¯´æ˜                   | é»˜è®¤å€¼   |
| ---------- | ---------------------- | -------- |
| `emoji`    | æ˜¯å¦ä½¿ç”¨ emoji         | true     |
| `type`     | å¼ºåˆ¶æŒ‡å®šç±»å‹           | æ¥è‡ªåˆ†æ |
| `scope`    | å¼ºåˆ¶æŒ‡å®šä½œç”¨åŸŸ         | æ¥è‡ªåˆ†æ |
| `breaking` | æ˜¯å¦ä¸º Breaking Change | false    |
| `issue`    | å…³è”çš„ issue ç¼–å·      | -        |

### Step 3: é€‰æ‹© Emoji

| ç±»å‹     | Emoji |
| -------- | ----- |
| feat     | âœ¨    |
| fix      | ğŸ›    |
| docs     | ğŸ“    |
| style    | ğŸ’„    |
| refactor | â™»ï¸    |
| perf     | âš¡    |
| test     | âœ…    |
| build    | ğŸ“¦    |
| ci       | ğŸ‘·    |
| chore    | ğŸ”§    |
| revert   | âª    |

### Step 4: ç”Ÿæˆæ ‡é¢˜

**æ ¼å¼**ï¼š`type(scope): emoji ç®€çŸ­æè¿°`

**è§„åˆ™**ï¼š

- æ€»é•¿åº¦ â‰¤ 72 å­—ç¬¦
- ä½¿ç”¨ç¥ˆä½¿è¯­æ°”ï¼ˆAdd, Fix, Update...ï¼‰
- ä¸ä»¥å¥å·ç»“å°¾

**ç¤ºä¾‹**ï¼š

```
feat(components): âœ¨ æ–°å¢ Button ç»„ä»¶
fix(api): ğŸ› ä¿®å¤ç”¨æˆ·è®¤è¯å¤±è´¥é—®é¢˜
docs(readme): ğŸ“ æ›´æ–°å®‰è£…è¯´æ˜
```

**Breaking Change æ ‡é¢˜**ï¼š

```
feat(api)!: âœ¨ ä¿®æ”¹å“åº”æ•°æ®æ ¼å¼
```

### Step 5: ç”Ÿæˆæ­£æ–‡

**å†…å®¹**ï¼š

1. ç®€è¦è¯´æ˜å˜æ›´ç›®çš„
2. åˆ—å‡ºå˜æ›´æ–‡ä»¶æ¸…å•
3. å˜æ›´ç»Ÿè®¡

**ç¤ºä¾‹**ï¼š

```markdown
æ–°å¢å¯å¤ç”¨çš„ Button ç»„ä»¶ï¼Œæ”¯æŒå¤šç§æ ·å¼å’Œå°ºå¯¸ã€‚

å˜æ›´æ–‡ä»¶:

- src/components/Button.tsx: ç»„ä»¶å®ç°
- src/components/Button.test.tsx: å•å…ƒæµ‹è¯•

ç»Ÿè®¡: 2 ä¸ªæ–‡ä»¶ï¼Œ+80/-0 è¡Œ
```

### Step 6: ç”Ÿæˆ Footer

**åŒ…å«**ï¼š

- `Closes #123`ï¼ˆå¦‚æœ‰å…³è” issueï¼‰
- `BREAKING CHANGE: æè¿°`ï¼ˆå¦‚æœ‰ï¼‰

### Step 7: å†™å…¥ç»“æœ

ä½¿ç”¨ Write å·¥å…·å°†ç»“æœå†™å…¥ `${run_dir}/commit-message.md`ï¼š

```markdown
# Commit Message

## æ ‡é¢˜

feat(components): âœ¨ æ–°å¢ Button ç»„ä»¶

## æ­£æ–‡

æ–°å¢å¯å¤ç”¨çš„ Button ç»„ä»¶ï¼Œæ”¯æŒå¤šç§æ ·å¼å’Œå°ºå¯¸ã€‚

å˜æ›´æ–‡ä»¶:

- src/components/Button.tsx: ç»„ä»¶å®ç°
- src/components/Button.test.tsx: å•å…ƒæµ‹è¯•

ç»Ÿè®¡: 2 ä¸ªæ–‡ä»¶ï¼Œ+80/-0 è¡Œ

## Footer

Closes #123
```

---

## Conventional Commit è§„èŒƒ

### ç±»å‹å®šä¹‰

| ç±»å‹     | è¯´æ˜     | ç‰ˆæœ¬å½±å“ |
| -------- | -------- | -------- |
| feat     | æ–°åŠŸèƒ½   | minor    |
| fix      | Bug ä¿®å¤ | patch    |
| docs     | æ–‡æ¡£å˜æ›´ | -        |
| style    | ä»£ç æ ¼å¼ | -        |
| refactor | é‡æ„     | -        |
| perf     | æ€§èƒ½ä¼˜åŒ– | patch    |
| test     | æµ‹è¯•     | -        |
| build    | æ„å»ºç³»ç»Ÿ | -        |
| ci       | CI é…ç½®  | -        |
| chore    | æ‚é¡¹     | -        |
| revert   | å›æ»š     | -        |

### Breaking Change

åœ¨ç±»å‹ååŠ æ„Ÿå¹å·è¡¨ç¤ºç ´åæ€§å˜æ›´ï¼š

    feat(api)!: ä¿®æ”¹å“åº”æ ¼å¼

å¹¶åœ¨ Footer ä¸­è¯¦ç»†è¯´æ˜ï¼š

    BREAKING CHANGE: æ‰€æœ‰ API å“åº”å­—æ®µä»ä¸‹åˆ’çº¿æ”¹ä¸ºé©¼å³°å‘½å

---

## è¿”å›å€¼

æ‰§è¡Œå®Œæˆåï¼Œè¿”å›ï¼š

```
ğŸ“ æäº¤ä¿¡æ¯ç”Ÿæˆå®Œæˆ

æ ‡é¢˜: ${title}
ç±»å‹: ${type}
ä½œç”¨åŸŸ: ${scope}
Emoji: ${emoji}

è¾“å‡º: ${run_dir}/commit-message.md
```

---

## çº¦æŸ

- ä¸åšå˜æ›´åˆ†æï¼ˆäº¤ç»™ change-analyzerï¼‰
- ä¸æ‰§è¡Œæäº¤ï¼ˆäº¤ç»™ commit-executorï¼‰
- æ ‡é¢˜é•¿åº¦å¿…é¡» â‰¤ 72 å­—ç¬¦
- éµå¾ª Conventional Commits è§„èŒƒ
- **ğŸš¨ æ ¼å¼å¿…é¡»æ˜¯ `type(scope): emoji ä¸­æ–‡æè¿°`**
- **ğŸš¨ å¿…é¡»ä½¿ç”¨ emojiï¼ˆä»æ˜ å°„è¡¨é€‰å–ï¼‰**
- **ğŸš¨ æè¿°å¿…é¡»ä½¿ç”¨ä¸­æ–‡**

## éªŒè¯æ£€æŸ¥ç‚¹

ç”Ÿæˆæäº¤ä¿¡æ¯åï¼Œè‡ªæ£€ä»¥ä¸‹å†…å®¹ï¼š

- [ ] æ ‡é¢˜åŒ…å« emojiï¼ˆâœ¨ğŸ›ğŸ“ğŸ’„â™»ï¸âš¡âœ…ğŸ“¦ğŸ‘·ğŸ”§âª ä¹‹ä¸€ï¼‰
- [ ] æè¿°æ˜¯ä¸­æ–‡
- [ ] æ ¼å¼ç¬¦åˆ `type(scope): emoji ä¸­æ–‡æè¿°`

**å¦‚æœä¸ç¬¦åˆï¼Œå¿…é¡»é‡æ–°ç”Ÿæˆï¼**
