{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "arc42 Sections Configuration",
  "description": "arc42 架构文档章节配置",
  "type": "object",
  "properties": {
    "sections": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "name", "required"],
        "properties": {
          "id": { "type": "integer", "minimum": 1, "maximum": 12 },
          "name": { "type": "string" },
          "name_en": { "type": "string" },
          "required": { "type": "boolean" },
          "description": { "type": "string" },
          "subsections": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "content_type": { "type": "string" }
              }
            }
          },
          "artifacts": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      },
      "default": [
        {
          "id": 1,
          "name": "引言和目标",
          "name_en": "Introduction and Goals",
          "required": true,
          "description": "描述系统的核心需求、质量目标和利益相关者",
          "subsections": [
            { "id": "1.1", "name": "需求概述", "content_type": "text" },
            { "id": "1.2", "name": "质量目标", "content_type": "table" },
            { "id": "1.3", "name": "利益相关者", "content_type": "table" }
          ],
          "artifacts": ["requirements_summary", "quality_goals", "stakeholders"]
        },
        {
          "id": 2,
          "name": "约束",
          "name_en": "Constraints",
          "required": false,
          "description": "列出技术、组织和惯例约束",
          "subsections": [
            { "id": "2.1", "name": "技术约束", "content_type": "table" },
            { "id": "2.2", "name": "组织约束", "content_type": "table" },
            { "id": "2.3", "name": "惯例约束", "content_type": "table" }
          ],
          "artifacts": ["constraints_list"]
        },
        {
          "id": 3,
          "name": "上下文和范围",
          "name_en": "Context and Scope",
          "required": true,
          "description": "定义系统边界和外部接口",
          "subsections": [
            { "id": "3.1", "name": "业务上下文", "content_type": "diagram" },
            { "id": "3.2", "name": "技术上下文", "content_type": "diagram" }
          ],
          "artifacts": ["context_diagram", "external_interfaces"]
        },
        {
          "id": 4,
          "name": "解决方案策略",
          "name_en": "Solution Strategy",
          "required": true,
          "description": "概述关键技术决策和架构模式",
          "subsections": [
            { "id": "4.1", "name": "技术决策", "content_type": "table" },
            { "id": "4.2", "name": "组织决策", "content_type": "table" },
            { "id": "4.3", "name": "架构模式", "content_type": "list" }
          ],
          "artifacts": ["tech_decisions", "arch_patterns"]
        },
        {
          "id": 5,
          "name": "构建块视图",
          "name_en": "Building Block View",
          "required": true,
          "description": "系统的静态分解结构",
          "subsections": [
            { "id": "5.1", "name": "Level 1 白盒", "content_type": "diagram" },
            { "id": "5.2", "name": "Level 2 白盒", "content_type": "diagram" }
          ],
          "artifacts": ["component_diagram", "module_descriptions"]
        },
        {
          "id": 6,
          "name": "运行时视图",
          "name_en": "Runtime View",
          "required": false,
          "description": "关键场景的运行时行为",
          "subsections": [
            { "id": "6.x", "name": "场景", "content_type": "sequence_diagram" }
          ],
          "artifacts": ["sequence_diagrams", "activity_diagrams"]
        },
        {
          "id": 7,
          "name": "部署视图",
          "name_en": "Deployment View",
          "required": false,
          "description": "基础设施和部署拓扑",
          "subsections": [
            { "id": "7.1", "name": "基础设施", "content_type": "table" },
            { "id": "7.2", "name": "部署拓扑", "content_type": "diagram" }
          ],
          "artifacts": ["deployment_diagram", "infrastructure_config"]
        },
        {
          "id": 8,
          "name": "横切关注点",
          "name_en": "Crosscutting Concepts",
          "required": true,
          "description": "跨模块的设计决策",
          "subsections": [
            { "id": "8.1", "name": "安全", "content_type": "table" },
            { "id": "8.2", "name": "日志", "content_type": "table" },
            { "id": "8.3", "name": "错误处理", "content_type": "text" },
            { "id": "8.4", "name": "持久化", "content_type": "text" },
            { "id": "8.5", "name": "通信", "content_type": "text" }
          ],
          "artifacts": ["security_design", "logging_strategy", "error_handling"]
        },
        {
          "id": 9,
          "name": "架构决策",
          "name_en": "Architecture Decisions",
          "required": true,
          "description": "重要的架构决策记录",
          "subsections": [
            { "id": "9.x", "name": "ADR", "content_type": "adr" }
          ],
          "artifacts": ["adr_list"]
        },
        {
          "id": 10,
          "name": "质量需求",
          "name_en": "Quality Requirements",
          "required": false,
          "description": "详细的质量需求和场景",
          "subsections": [
            { "id": "10.1", "name": "质量树", "content_type": "tree" },
            { "id": "10.2", "name": "质量场景", "content_type": "table" }
          ],
          "artifacts": ["quality_tree", "quality_scenarios"]
        },
        {
          "id": 11,
          "name": "风险和技术债务",
          "name_en": "Risks and Technical Debt",
          "required": false,
          "description": "已识别的风险和技术债务",
          "subsections": [
            { "id": "11.1", "name": "风险", "content_type": "table" },
            { "id": "11.2", "name": "技术债务", "content_type": "table" }
          ],
          "artifacts": ["risk_register", "tech_debt_backlog"]
        },
        {
          "id": 12,
          "name": "术语表",
          "name_en": "Glossary",
          "required": false,
          "description": "领域和技术术语定义",
          "subsections": [],
          "artifacts": ["glossary"]
        }
      ]
    },
    "task_type_mapping": {
      "type": "object",
      "description": "任务类型到章节重点的映射",
      "properties": {
        "frontend": {
          "type": "object",
          "properties": {
            "focus_sections": {
              "type": "array",
              "items": { "type": "integer" }
            },
            "skip_sections": { "type": "array", "items": { "type": "integer" } }
          },
          "default": {
            "focus_sections": [3, 5, 6, 8],
            "skip_sections": [7]
          }
        },
        "backend": {
          "type": "object",
          "properties": {
            "focus_sections": {
              "type": "array",
              "items": { "type": "integer" }
            },
            "skip_sections": { "type": "array", "items": { "type": "integer" } }
          },
          "default": {
            "focus_sections": [3, 4, 5, 7, 8, 9],
            "skip_sections": []
          }
        },
        "fullstack": {
          "type": "object",
          "properties": {
            "focus_sections": {
              "type": "array",
              "items": { "type": "integer" }
            },
            "skip_sections": { "type": "array", "items": { "type": "integer" } }
          },
          "default": {
            "focus_sections": [1, 3, 4, 5, 6, 7, 8, 9],
            "skip_sections": []
          }
        }
      }
    }
  }
}
